{
  "hash": "a4627087f0c1d41d221dd7adbb72c9b0",
  "result": {
    "markdown": "---\ntitle: \"Opendata_Analysis CH3\"\nauthor: \"Seongtaek\"\ndate: \"2023-04-16\"\ncategories: [code, opendata_analysis, rstudio]\nimage: \"import.jpg\"\ntoc: true\ntoc-depth: 4\nnumber-sections: true\n---\n\n\n<table align=\"bottom\">\n  <td>\n    <a target=\"_blank\" href=\"import---write.html\"><img\n    src = r_logo.png />HTML파일로 보기</a>\n  </td>\n</table>\n\nImport & Write\n\n## 오픈데이터 분석 실습 : Import/Write Data\n\n### 패키지 불러오기\n- read_csv 기능 존재\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n## Import Data\n\n### read_csv\n- read.csv와 다르게 문자열 factor 처리X\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### 현재 경로 확인\ngetwd()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"G:/내 드라이브/taek_blog/posts/Opendata_Analysis Ch3\"\n```\n:::\n\n```{.r .cell-code}\n### 경로 설정\n#setwd()\n\n### csv파일 불러오기\nheights <- read_csv(\"heights.csv\")\nheights\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,192 × 6\n    earn height sex       ed   age race    \n   <dbl>  <dbl> <chr>  <dbl> <dbl> <chr>   \n 1 50000   74.4 male      16    45 white   \n 2 60000   65.5 female    16    58 white   \n 3 30000   63.6 female    16    29 white   \n 4 50000   63.1 female    16    91 other   \n 5 51000   63.4 female    17    39 white   \n 6  9000   64.4 female    15    26 white   \n 7 29000   61.7 female    12    49 white   \n 8 32000   72.7 male      17    46 white   \n 9  2000   72.0 male      15    21 hispanic\n10 27000   72.2 male      12    26 white   \n# … with 1,182 more rows\n```\n:::\n\n```{.r .cell-code}\n### 절대경로 사용\nheights <- read_csv(\"C:/Users/seong taek/Desktop/3-1 Opendata_Analysis/opendata/heights.csv\")\nheights\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,192 × 6\n    earn height sex       ed   age race    \n   <dbl>  <dbl> <chr>  <dbl> <dbl> <chr>   \n 1 50000   74.4 male      16    45 white   \n 2 60000   65.5 female    16    58 white   \n 3 30000   63.6 female    16    29 white   \n 4 50000   63.1 female    16    91 other   \n 5 51000   63.4 female    17    39 white   \n 6  9000   64.4 female    15    26 white   \n 7 29000   61.7 female    12    49 white   \n 8 32000   72.7 male      17    46 white   \n 9  2000   72.0 male      15    21 hispanic\n10 27000   72.2 male      12    26 white   \n# … with 1,182 more rows\n```\n:::\n\n```{.r .cell-code}\n### tibble 데이터 프레임 생성\nread_csv(\"a,b,c\n         1,2,3\n         4,5,6\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 3\n      a     b     c\n  <dbl> <dbl> <dbl>\n1     1     2     3\n2     4     5     6\n```\n:::\n\n```{.r .cell-code}\n### 라인 스킵\nread_csv(\"The first line of metadata\n         The second line of metadata\n         x,y,z\n         1,2,3\" , skip=2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 3\n      x     y     z\n  <dbl> <dbl> <dbl>\n1     1     2     3\n```\n:::\n\n```{.r .cell-code}\n### 주석 스킵\nread_csv(\"#A comment I want to skip\n         x,y,z\n         1,2,3\", comment=\"#\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 3\n      x     y     z\n  <dbl> <dbl> <dbl>\n1     1     2     3\n```\n:::\n\n```{.r .cell-code}\n### 컬럼 이름 없이 내용만\nread_csv(\"1,2,3\n         4,5,6\", col_names = F)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 3\n     X1    X2    X3\n  <dbl> <dbl> <dbl>\n1     1     2     3\n2     4     5     6\n```\n:::\n\n```{.r .cell-code}\n### '\\n' : 한줄 띄우기\nread_csv(\"1,2,3 \\n 4,5,6,\", col_names = F)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 3\n     X1    X2    X3\n  <dbl> <dbl> <dbl>\n1     1     2     3\n2     4     5     6\n```\n:::\n\n```{.r .cell-code}\n### 컬럼 이름 지정\nread_csv(\"1,2,3 \\n 4,5,6,\", col_names = c(\"A\",\"B\",\"C\"))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 3\n      A     B     C\n  <dbl> <dbl> <dbl>\n1     1     2     3\n2     4     5     6\n```\n:::\n\n```{.r .cell-code}\n### NA값 부여\nread_csv(\"a,b,c \\n 1,2,.\", na=\".\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 3\n      a     b c    \n  <dbl> <dbl> <lgl>\n1     1     2 NA   \n```\n:::\n:::\n\n\n### Locale 설정/확인\n\n\n::: {.cell}\n\n```{.r .cell-code}\nSys.getlocale()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"LC_COLLATE=Korean_Korea.utf8;LC_CTYPE=ko_KR.UTF-8;LC_MONETARY=Korean_Korea.utf8;LC_NUMERIC=C;LC_TIME=Korean_Korea.utf8\"\n```\n:::\n\n```{.r .cell-code}\n### 언어 영어로\n#Sys.setlocale(\"LC_ALL\", \"English\")\n\n### 강제 언어 삭제\n#Sys.setlocale(\"LC_ALL\", \"C\")\n```\n:::\n\n\n### 한글 파일 읽기\n\n\n::: {.cell}\n\n```{.r .cell-code}\n### 인코딩 찾기\nguess_encoding(\"exercise.csv\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 2 × 2\n  encoding   confidence\n  <chr>           <dbl>\n1 EUC-KR           1   \n2 IBM420_ltr       0.25\n```\n:::\n\n```{.r .cell-code}\n### 인코딩 입력으로 에러해결\nexercise <- read_csv(\"exercise.csv\", locale = locale(encoding = \"EUC-KR\"))\nexercise\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n  이름  선호도\n  <chr>  <dbl>\n1 하민       5\n2 하준       4\n3 하진       4\n4 태산       3\n5 태민       2\n```\n:::\n\n```{.r .cell-code}\n### csv파일을 미리 열어보고 인코딩 변경\nexercise <- read_csv(\"exercise_utf_8.csv\")\nexercise\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 2\n  이름  선호도\n  <chr>  <dbl>\n1 하민       5\n2 하준       4\n3 하진       4\n4 태산       3\n5 태민       2\n```\n:::\n\n```{.r .cell-code}\nguess_encoding(\"exercise_utf_8.csv\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  encoding     confidence\n  <chr>             <dbl>\n1 UTF-8              1   \n2 windows-1255       0.38\n3 windows-1255       0.29\n```\n:::\n:::\n\n\n## Write Data\n\n### 파일 저장/삭제\n\n\n::: {.cell}\n\n```{.r .cell-code}\nheights <- read_csv(\"heights.csv\")\nheights\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,192 × 6\n    earn height sex       ed   age race    \n   <dbl>  <dbl> <chr>  <dbl> <dbl> <chr>   \n 1 50000   74.4 male      16    45 white   \n 2 60000   65.5 female    16    58 white   \n 3 30000   63.6 female    16    29 white   \n 4 50000   63.1 female    16    91 other   \n 5 51000   63.4 female    17    39 white   \n 6  9000   64.4 female    15    26 white   \n 7 29000   61.7 female    12    49 white   \n 8 32000   72.7 male      17    46 white   \n 9  2000   72.0 male      15    21 hispanic\n10 27000   72.2 male      12    26 white   \n# … with 1,182 more rows\n```\n:::\n\n```{.r .cell-code}\n### 현재 경로에 csv파일 저장\nwrite_csv(heights, \"만들 파일 이름.csv\")\n\n### rds 확장자 \nwrite_rds(heights, \"만들 파일 이름.rds\")\nread_rds(\"만들 파일 이름.rds\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,192 × 6\n    earn height sex       ed   age race    \n   <dbl>  <dbl> <chr>  <dbl> <dbl> <chr>   \n 1 50000   74.4 male      16    45 white   \n 2 60000   65.5 female    16    58 white   \n 3 30000   63.6 female    16    29 white   \n 4 50000   63.1 female    16    91 other   \n 5 51000   63.4 female    17    39 white   \n 6  9000   64.4 female    15    26 white   \n 7 29000   61.7 female    12    49 white   \n 8 32000   72.7 male      17    46 white   \n 9  2000   72.0 male      15    21 hispanic\n10 27000   72.2 male      12    26 white   \n# … with 1,182 more rows\n```\n:::\n\n```{.r .cell-code}\n### 파일 삭제\nfile.remove(\"만들 파일 이름.csv\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] TRUE\n```\n:::\n:::\n\n\n### feather 패키지\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#install.packages(\"feather\")\nlibrary(feather)\n\nwrite_feather(heights, \"heights.feather\")\nread_feather(\"heights.feather\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,192 × 6\n    earn height sex       ed   age race    \n   <dbl>  <dbl> <chr>  <dbl> <dbl> <chr>   \n 1 50000   74.4 male      16    45 white   \n 2 60000   65.5 female    16    58 white   \n 3 30000   63.6 female    16    29 white   \n 4 50000   63.1 female    16    91 other   \n 5 51000   63.4 female    17    39 white   \n 6  9000   64.4 female    15    26 white   \n 7 29000   61.7 female    12    49 white   \n 8 32000   72.7 male      17    46 white   \n 9  2000   72.0 male      15    21 hispanic\n10 27000   72.2 male      12    26 white   \n# … with 1,182 more rows\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}