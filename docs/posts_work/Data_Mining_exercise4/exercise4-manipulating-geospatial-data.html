<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Seongtaek">
<meta name="dcterms.date" content="2023-05-02">

<title>Taek_Blog - Data_Mining_Kaggle</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Taek_Blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../work.html">
 <span class="menu-text">Work</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">Profile</span></a>
  </li>  
  <li class="nav-item dropdown  compact">
    <a class="nav-link dropdown-toggle" href="#" id="" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="">    
        <li>
    <a class="dropdown-item" href="https://www.instagram.com/keatgnus/"><i class="bi bi-instagram" role="img">
</i> 
 <span class="dropdown-text">instagram</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/keatgnus"><i class="bi bi-github" role="img">
</i> 
 <span class="dropdown-text">github</span></a>
  </li>  
    </ul>
  </li>
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="toc-section-number">1</span>  Introduction</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="toc-section-number">2</span>  Exercises</a>
  <ul>
  <li><a href="#누락된-위치를-지오코드합니다" id="toc-누락된-위치를-지오코드합니다" class="nav-link" data-scroll-target="#누락된-위치를-지오코드합니다"><span class="toc-section-number">2.1</span>  누락된 위치를 지오코드합니다</a></li>
  <li><a href="#berkeley-위치를-봅니다." id="toc-berkeley-위치를-봅니다." class="nav-link" data-scroll-target="#berkeley-위치를-봅니다."><span class="toc-section-number">2.2</span>  2) Berkeley 위치를 봅니다.</a></li>
  <li><a href="#데이터를-통합합니다." id="toc-데이터를-통합합니다." class="nav-link" data-scroll-target="#데이터를-통합합니다."><span class="toc-section-number">2.3</span>  3) 데이터를 통합합니다.</a></li>
  <li><a href="#어느-카운티가-유망해-보이나요" id="toc-어느-카운티가-유망해-보이나요" class="nav-link" data-scroll-target="#어느-카운티가-유망해-보이나요"><span class="toc-section-number">2.4</span>  4) 어느 카운티가 유망해 보이나요?</a></li>
  <li><a href="#당신은-몇-개의-상점을-확인했습니까" id="toc-당신은-몇-개의-상점을-확인했습니까" class="nav-link" data-scroll-target="#당신은-몇-개의-상점을-확인했습니까"><span class="toc-section-number">2.5</span>  5) 당신은 몇 개의 상점을 확인했습니까?</a></li>
  <li><a href="#저장소-위치를-시각화합니다." id="toc-저장소-위치를-시각화합니다." class="nav-link" data-scroll-target="#저장소-위치를-시각화합니다."><span class="toc-section-number">2.6</span>  6) 저장소 위치를 시각화합니다.</a></li>
  </ul></li>
  <li><a href="#keep-going" id="toc-keep-going" class="nav-link" data-scroll-target="#keep-going"><span class="toc-section-number">3</span>  Keep going</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data_Mining_Kaggle</h1>
  <div class="quarto-categories">
    <div class="quarto-category">code</div>
    <div class="quarto-category">data_mining</div>
    <div class="quarto-category">jupyter</div>
    <div class="quarto-category">kaggle</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Seongtaek </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 2, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<p>Exercise 4 - Manipulating Geospatial Data</p>

<table align="bottom">
<tbody><tr><td>
<a target="_blank" href="http://localhost:8888/notebooks/3-1%20Data_Mining/exercise4-manipulating-geospatial-data.ipynb#"><img src="small_jup_image.jpg">Jupyter에서 실행하기</a>
</td>

</tr></tbody></table>
<p><strong>This notebook is an exercise in the <a href="https://www.kaggle.com/learn/geospatial-analysis">Geospatial Analysis</a> course. You can reference the tutorial at <a href="https://www.kaggle.com/alexisbcook/manipulating-geospatial-data">this link</a>.</strong></p>
<hr>
<section id="introduction" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">1</span> Introduction</h2>
<p>You are a Starbucks big data analyst (<a href="https://www.forbes.com/sites/bernardmarr/2018/05/28/starbucks-using-big-data-analytics-and-artificial-intelligence-to-boost-performance/#130c7d765cdc">that’s a real job!</a>) looking to find the next store into a <a href="https://www.businessinsider.com/starbucks-reserve-roastery-compared-regular-starbucks-2018-12#also-on-the-first-floor-was-the-main-coffee-bar-five-hourglass-like-units-hold-the-freshly-roasted-coffee-beans-that-are-used-in-each-order-the-selection-rotates-seasonally-5">Starbucks Reserve Roastery</a>. These roasteries are much larger than a typical Starbucks store and have several additional features, including various food and wine options, along with upscale lounge areas. You’ll investigate the demographics of various counties in the state of California, to determine potentially suitable locations.</p>
<center>
<img src="https://storage.googleapis.com/kaggle-media/learn/images/BIyE6kR.png" width="450"><br><br>
</center>
<p>Before you get started, run the code cell below to set everything up.</p>
<ul>
<li>당신은 스타벅스의 빅데이터 분석가입니다. (그것은 진정한 직업입니다!) 스타벅스 리저브 로스터리에서 다음 매장을 찾고 있습니다. 이 로스터리는 일반적인 스타벅스 매장보다 훨씬 크고 고급 라운지 공간과 함께 다양한 음식과 와인 옵션을 포함한 몇 가지 추가 기능을 갖추고 있습니다. 캘리포니아 주의 다양한 카운티의 인구 통계를 조사하여 잠재적으로 적합한 위치를 결정합니다.</li>
<li>시작하기 전에 아래의 코드 셀을 실행하여 모든 설정을 수행합니다</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!pip install geopy</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> math</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> geopy.geocoders <span class="im">import</span> Nominatim</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> folium </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> folium <span class="im">import</span> Marker</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> folium.plugins <span class="im">import</span> MarkerCluster</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>이전 연습의 embed_map() 함수를 사용하여 지도를 시각화합니다.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> embed_map(m, file_name):</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="im">from</span> IPython.display <span class="im">import</span> IFrame</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    m.save(file_name)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> IFrame(file_name, width<span class="op">=</span><span class="st">'100%'</span>, height<span class="op">=</span><span class="st">'500px'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="exercises" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="exercises"><span class="header-section-number">2</span> Exercises</h2>
<section id="누락된-위치를-지오코드합니다" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="누락된-위치를-지오코드합니다"><span class="header-section-number">2.1</span> 누락된 위치를 지오코드합니다</h3>
<p>다음 코드 셀을 실행하여 캘리포니아 주에 있는 스타벅스 위치가 포함된 데이터 프레임 스타벅스를 만듭니다.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load and preview Starbucks locations in California</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>starbucks <span class="op">=</span> pd.read_csv(<span class="st">"C:/Users\seong taek/Desktop/archive/starbucks_locations.csv"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>starbucks.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div>


<table class="dataframe table table-sm table-striped">
<thead>
<tr>
<th>
</th>
<th>
Store Number
</th>
<th>
Store Name
</th>
<th>
Address
</th>
<th>
City
</th>
<th>
Longitude
</th>
<th>
Latitude
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
10429-100710
</td>
<td>
Palmdale &amp; Hwy 395
</td>
<td>
14136 US Hwy 395 Adelanto CA
</td>
<td>
Adelanto
</td>
<td>
-117.40
</td>
<td>
34.51
</td>
</tr>
<tr>
<th>
1
</th>
<td>
635-352
</td>
<td>
Kanan &amp; Thousand Oaks
</td>
<td>
5827 Kanan Road Agoura CA
</td>
<td>
Agoura
</td>
<td>
-118.76
</td>
<td>
34.16
</td>
</tr>
<tr>
<th>
2
</th>
<td>
74510-27669
</td>
<td>
Vons-Agoura Hills #2001
</td>
<td>
5671 Kanan Rd. Agoura Hills CA
</td>
<td>
Agoura Hills
</td>
<td>
-118.76
</td>
<td>
34.15
</td>
</tr>
<tr>
<th>
3
</th>
<td>
29839-255026
</td>
<td>
Target Anaheim T-0677
</td>
<td>
8148 E SANTA ANA CANYON ROAD AHAHEIM CA
</td>
<td>
AHAHEIM
</td>
<td>
-117.75
</td>
<td>
33.87
</td>
</tr>
<tr>
<th>
4
</th>
<td>
23463-230284
</td>
<td>
Safeway - Alameda 3281
</td>
<td>
2600 5th Street Alameda CA
</td>
<td>
Alameda
</td>
<td>
-122.28
</td>
<td>
37.79
</td>
</tr>
</tbody>

</table>
</div>
<p>대부분의 상점은 알려진 위치(위도, 경도)를 가지고 있습니다. 하지만, 버클리 시의 모든 장소가 사라졌습니다</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How many rows in each column have missing values?</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(starbucks.isnull().<span class="bu">sum</span>())</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># View rows with missing locations</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>rows_with_missing <span class="op">=</span> starbucks[starbucks[<span class="st">"City"</span>]<span class="op">==</span><span class="st">"Berkeley"</span>]</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>rows_with_missing</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Store Number    0
Store Name      0
Address         0
City            0
Longitude       5
Latitude        5
dtype: int64</code></pre>
<div>


<table class="dataframe table table-sm table-striped">
<thead>
<tr>
<th>
</th>
<th>
Store Number
</th>
<th>
Store Name
</th>
<th>
Address
</th>
<th>
City
</th>
<th>
Longitude
</th>
<th>
Latitude
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
153
</th>
<td>
5406-945
</td>
<td>
2224 Shattuck - Berkeley
</td>
<td>
2224 Shattuck Avenue Berkeley CA
</td>
<td>
Berkeley
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
154
</th>
<td>
570-512
</td>
<td>
Solano Ave
</td>
<td>
1799 Solano Avenue Berkeley CA
</td>
<td>
Berkeley
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
155
</th>
<td>
17877-164526
</td>
<td>
Safeway - Berkeley #691
</td>
<td>
1444 Shattuck Place Berkeley CA
</td>
<td>
Berkeley
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
156
</th>
<td>
19864-202264
</td>
<td>
Telegraph &amp; Ashby
</td>
<td>
3001 Telegraph Avenue Berkeley CA
</td>
<td>
Berkeley
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
<tr>
<th>
157
</th>
<td>
9217-9253
</td>
<td>
2128 Oxford St.
</td>
<td>
2128 Oxford Street Berkeley CA
</td>
<td>
Berkeley
</td>
<td>
NaN
</td>
<td>
NaN
</td>
</tr>
</tbody>

</table>
</div>
<p>아래 코드 셀을 사용하여 이러한 값을 Nominatim 지오코더로 채웁니다.</p>
<p>튜토리얼에서 Nominatim()(geopy.geocoders에서)을 사용하여 값을 지오코딩했으며, 이는 본 과정 이외의 프로젝트에서 사용할 수 있는 것입니다.</p>
<p>이 연습에서는 (learn tools.geospatic에서) 약간 다른 함수 Nominatim()을 사용합니다.도구). 이 기능은 노트북 상단에 가져온 것으로 GeoPandas의 기능과 동일하게 작동합니다.</p>
<p>즉, 다음과 같은 경우에 한합니다:</p>
<p>노트북 상단에 있는 가져오기 문을 변경하지 않습니다 당신은 아래의 코드 셀에서 지오코딩 함수를 지오코딩이라고 부릅니다, 코드가 의도한 대로 작동합니다!</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the geocoder</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>geolocator <span class="op">=</span> Nominatim(user_agent<span class="op">=</span><span class="st">"kaggle_learn"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Your code here</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> my_geocoder(row):</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    point <span class="op">=</span> geolocator.geocode(row).point</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.Series({<span class="st">'Latitude'</span>: point.latitude, <span class="st">'Longitude'</span>: point.longitude})</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>berkeley_locations <span class="op">=</span> rows_with_missing.<span class="bu">apply</span>(<span class="kw">lambda</span> x: my_geocoder(x[<span class="st">'Address'</span>]), axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>starbucks.update(berkeley_locations)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>starbucks</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div>


<table class="dataframe table table-sm table-striped">
<thead>
<tr>
<th>
</th>
<th>
Store Number
</th>
<th>
Store Name
</th>
<th>
Address
</th>
<th>
City
</th>
<th>
Longitude
</th>
<th>
Latitude
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
10429-100710
</td>
<td>
Palmdale &amp; Hwy 395
</td>
<td>
14136 US Hwy 395 Adelanto CA
</td>
<td>
Adelanto
</td>
<td>
-117.40
</td>
<td>
34.51
</td>
</tr>
<tr>
<th>
1
</th>
<td>
635-352
</td>
<td>
Kanan &amp; Thousand Oaks
</td>
<td>
5827 Kanan Road Agoura CA
</td>
<td>
Agoura
</td>
<td>
-118.76
</td>
<td>
34.16
</td>
</tr>
<tr>
<th>
2
</th>
<td>
74510-27669
</td>
<td>
Vons-Agoura Hills #2001
</td>
<td>
5671 Kanan Rd. Agoura Hills CA
</td>
<td>
Agoura Hills
</td>
<td>
-118.76
</td>
<td>
34.15
</td>
</tr>
<tr>
<th>
3
</th>
<td>
29839-255026
</td>
<td>
Target Anaheim T-0677
</td>
<td>
8148 E SANTA ANA CANYON ROAD AHAHEIM CA
</td>
<td>
AHAHEIM
</td>
<td>
-117.75
</td>
<td>
33.87
</td>
</tr>
<tr>
<th>
4
</th>
<td>
23463-230284
</td>
<td>
Safeway - Alameda 3281
</td>
<td>
2600 5th Street Alameda CA
</td>
<td>
Alameda
</td>
<td>
-122.28
</td>
<td>
37.79
</td>
</tr>
<tr>
<th>
…
</th>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
<td>
…
</td>
</tr>
<tr>
<th>
2816
</th>
<td>
14071-108147
</td>
<td>
Hwy 20 &amp; Tharp - Yuba City
</td>
<td>
1615 Colusa Hwy, Ste 100 Yuba City CA
</td>
<td>
Yuba City
</td>
<td>
-121.64
</td>
<td>
39.14
</td>
</tr>
<tr>
<th>
2817
</th>
<td>
9974-98559
</td>
<td>
Yucaipa &amp; Hampton, Yucaipa
</td>
<td>
31364 Yucaipa Blvd., A Yucaipa CA
</td>
<td>
Yucaipa
</td>
<td>
-117.12
</td>
<td>
34.03
</td>
</tr>
<tr>
<th>
2818
</th>
<td>
79654-108478
</td>
<td>
Vons - Yucaipa #1796
</td>
<td>
33644 YUCAIPA BLVD YUCAIPA CA
</td>
<td>
YUCAIPA
</td>
<td>
-117.07
</td>
<td>
34.04
</td>
</tr>
<tr>
<th>
2819
</th>
<td>
6438-245084
</td>
<td>
Yucaipa &amp; 6th
</td>
<td>
34050 Yucaipa Blvd., 200 Yucaipa CA
</td>
<td>
Yucaipa
</td>
<td>
-117.06
</td>
<td>
34.03
</td>
</tr>
<tr>
<th>
2820
</th>
<td>
6829-82142
</td>
<td>
Highway 62 &amp; Warren Vista
</td>
<td>
57744 29 Palms Highway Yucca Valley CA
</td>
<td>
Yucca Valley
</td>
<td>
-116.40
</td>
<td>
34.13
</td>
</tr>
</tbody>

</table>
<p>
2821 rows × 6 columns
</p>
</div>
</section>
<section id="berkeley-위치를-봅니다." class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="berkeley-위치를-봅니다."><span class="header-section-number">2.2</span> 2) Berkeley 위치를 봅니다.</h3>
<p>방금 찾은 위치를 살펴보겠습니다. OpenStreetMap 스타일로 Berkeley의 (위도, 경도) 위치를 시각화합니다.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a base map</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>m_2 <span class="op">=</span> folium.Map(location<span class="op">=</span>[<span class="fl">37.88</span>,<span class="op">-</span><span class="fl">122.26</span>], zoom_start<span class="op">=</span><span class="dv">13</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Your code here: Add a marker for each Berkeley location</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx, row <span class="kw">in</span> starbucks[starbucks[<span class="st">"City"</span>]<span class="op">==</span><span class="st">'Berkeley'</span>].iterrows():</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    Marker([row[<span class="st">'Latitude'</span>], row[<span class="st">'Longitude'</span>]]).add_to(m_2)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the map</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>embed_map(m_2, <span class="st">'q_2.html'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<iframe width="100%" height="500px" src="q_2.html" frameborder="0" allowfullscreen="">
</iframe>
<p>Considering only the five locations in Berkeley, how many of the (latitude, longitude) locations seem potentially correct (are located in the correct city)?</p>
</section>
<section id="데이터를-통합합니다." class="level3" data-number="2.3">
<h3 data-number="2.3" class="anchored" data-anchor-id="데이터를-통합합니다."><span class="header-section-number">2.3</span> 3) 데이터를 통합합니다.</h3>
<p>아래 코드를 실행하여 캘리포니아 주의 각 카운티에 대한 이름, 면적(제곱킬로미터) 및 고유 ID(“GEOID” 열)가 포함된 GeoDataFrame “CA_counties”를 로드합니다. 지오메트리 열에는 카운티 경계가 있는 폴리곤이 포함되어 있습니다.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>CA_counties <span class="op">=</span> gpd.read_file(<span class="st">"C:/Users\seong taek/Desktop/archive/CA_county_boundaries/CA_county_boundaries/CA_county_boundaries.shp"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>CA_counties.crs <span class="op">=</span> {<span class="st">'init'</span>: <span class="st">'epsg:4326'</span>}</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>CA_counties.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>C:\Users\seong taek\anaconda3\lib\site-packages\pyproj\crs\crs.py:141: FutureWarning: '+init=&lt;authority&gt;:&lt;code&gt;' syntax is deprecated. '&lt;authority&gt;:&lt;code&gt;' is the preferred initialization method. When making the change, be mindful of axis order changes: https://pyproj4.github.io/pyproj/stable/gotchas.html#axis-order-changes-in-proj-6
  in_crs_string = _prepare_from_proj_string(in_crs_string)</code></pre>
<div>


<table class="dataframe table table-sm table-striped">
<thead>
<tr>
<th>
</th>
<th>
GEOID
</th>
<th>
name
</th>
<th>
area_sqkm
</th>
<th>
geometry
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
6091
</td>
<td>
Sierra County
</td>
<td>
2491.995494
</td>
<td>
POLYGON ((-120.65560 39.69357, -120.65554 39.6…
</td>
</tr>
<tr>
<th>
1
</th>
<td>
6067
</td>
<td>
Sacramento County
</td>
<td>
2575.258262
</td>
<td>
POLYGON ((-121.18858 38.71431, -121.18732 38.7…
</td>
</tr>
<tr>
<th>
2
</th>
<td>
6083
</td>
<td>
Santa Barbara County
</td>
<td>
9813.817958
</td>
<td>
MULTIPOLYGON (((-120.58191 34.09856, -120.5822…
</td>
</tr>
<tr>
<th>
3
</th>
<td>
6009
</td>
<td>
Calaveras County
</td>
<td>
2685.626726
</td>
<td>
POLYGON ((-120.63095 38.34111, -120.63058 38.3…
</td>
</tr>
<tr>
<th>
4
</th>
<td>
6111
</td>
<td>
Ventura County
</td>
<td>
5719.321379
</td>
<td>
MULTIPOLYGON (((-119.63631 33.27304, -119.6360…
</td>
</tr>
</tbody>

</table>
</div>
<p>다음으로 세 가지 데이터 프레임을 만듭니다:</p>
<ul>
<li>CA_pop에는 각 카운티의 인구 추정치가 포함되어 있습니다.</li>
<li>CA_high_earner에는 연간 $150,000 이상의 소득을 가진 가구 수가 포함되어 있습니다.</li>
<li>CA_median_age에는 각 카운티의 중위수 연령이 포함됩니다.</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>CA_pop <span class="op">=</span> pd.read_csv(<span class="st">"C:/Users\seong taek/Desktop/archive/CA_county_population.csv"</span>, index_col<span class="op">=</span><span class="st">"GEOID"</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>CA_high_earners <span class="op">=</span> pd.read_csv(<span class="st">"C:/Users\seong taek/Desktop/archive/CA_county_high_earners.csv"</span>, index_col<span class="op">=</span><span class="st">"GEOID"</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>CA_median_age <span class="op">=</span> pd.read_csv(<span class="st">"C:/Users\seong taek/Desktop/archive/CA_county_median_age.csv"</span>, index_col<span class="op">=</span><span class="st">"GEOID"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>다음 코드 셀을 사용하여 CA_pop, CA_high_earners 및 CA_median_age와 함께 CA_counties GeoDataFrame에 join 합니다.</p>
<p>결과 GeoDataFrame CA_stats의 이름을 지정하고 “GEOID”, “name”, “area_sqkm”, “geometry”, “population”, “high_earners” 및 “median_age”의 8개 열이 있는지 확인합니다.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Your code here</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>cols_to_add <span class="op">=</span> CA_pop.join([CA_high_earners, CA_median_age]).reset_index()</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>CA_stats <span class="op">=</span> CA_counties.merge(cols_to_add, on<span class="op">=</span><span class="st">"GEOID"</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>CA_stats.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div>


<table class="dataframe table table-sm table-striped">
<thead>
<tr>
<th>
</th>
<th>
GEOID
</th>
<th>
name
</th>
<th>
area_sqkm
</th>
<th>
geometry
</th>
<th>
population
</th>
<th>
high_earners
</th>
<th>
median_age
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
0
</th>
<td>
6091
</td>
<td>
Sierra County
</td>
<td>
2491.995494
</td>
<td>
POLYGON ((-120.65560 39.69357, -120.65554 39.6…
</td>
<td>
2987
</td>
<td>
111
</td>
<td>
55.0
</td>
</tr>
<tr>
<th>
1
</th>
<td>
6067
</td>
<td>
Sacramento County
</td>
<td>
2575.258262
</td>
<td>
POLYGON ((-121.18858 38.71431, -121.18732 38.7…
</td>
<td>
1540975
</td>
<td>
65768
</td>
<td>
35.9
</td>
</tr>
<tr>
<th>
2
</th>
<td>
6083
</td>
<td>
Santa Barbara County
</td>
<td>
9813.817958
</td>
<td>
MULTIPOLYGON (((-120.58191 34.09856, -120.5822…
</td>
<td>
446527
</td>
<td>
25231
</td>
<td>
33.7
</td>
</tr>
<tr>
<th>
3
</th>
<td>
6009
</td>
<td>
Calaveras County
</td>
<td>
2685.626726
</td>
<td>
POLYGON ((-120.63095 38.34111, -120.63058 38.3…
</td>
<td>
45602
</td>
<td>
2046
</td>
<td>
51.6
</td>
</tr>
<tr>
<th>
4
</th>
<td>
6111
</td>
<td>
Ventura County
</td>
<td>
5719.321379
</td>
<td>
MULTIPOLYGON (((-119.63631 33.27304, -119.6360…
</td>
<td>
850967
</td>
<td>
57121
</td>
<td>
37.5
</td>
</tr>
</tbody>

</table>
</div>
<p>이제 모든 데이터가 한 곳에 있으므로 열 조합을 사용하는 통계량을 계산하는 것이 훨씬 쉬워졌습니다. 다음 코드 셀을 실행하여 모집단 밀도가 있는 “밀도” 열을 만듭니다.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>CA_stats[<span class="st">"density"</span>] <span class="op">=</span> CA_stats[<span class="st">"population"</span>] <span class="op">/</span> CA_stats[<span class="st">"area_sqkm"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="어느-카운티가-유망해-보이나요" class="level3" data-number="2.4">
<h3 data-number="2.4" class="anchored" data-anchor-id="어느-카운티가-유망해-보이나요"><span class="header-section-number">2.4</span> 4) 어느 카운티가 유망해 보이나요?</h3>
<p>모든 정보를 단일 GeoDataFrame으로 통합하면 특정 기준을 충족하는 카운티를 훨씬 쉽게 선택할 수 있습니다.</p>
<p>다음 코드 셀을 사용하여 CA_stats GeoDataFrame에서 행의 하위 집합(및 모든 열)을 포함하는 GeoDataFramesel_counties를 만듭니다. 특히 다음과 같은 국가를 선택해야 합니다:</p>
<ul>
<li>매년 15만 달러를 버는 최소 10만 가구가 있습니다,</li>
<li>중위연령은 38.5세 미만이고</li>
<li>거주자의 밀도는 최소 285(제곱킬로미터당)입니다.</li>
</ul>
<p>또한 선택된 카운티는 다음 기준 중 하나 이상을 충족해야 합니다:</p>
<ul>
<li>매년 15만 달러를 버는 최소 50만 가구가 있습니다,</li>
<li>중위연령이 35.5세 미만인 경우</li>
<li>거주자의 밀도는 적어도 1400(평방킬로미터당)입니다.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Your code here</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Your code here</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>sel_counties <span class="op">=</span> CA_stats[((CA_stats.high_earners <span class="op">&gt;</span> <span class="dv">100000</span>) <span class="op">&amp;</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                         (CA_stats.median_age <span class="op">&lt;</span> <span class="fl">38.5</span>) <span class="op">&amp;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>                         (CA_stats.density <span class="op">&gt;</span> <span class="dv">285</span>) <span class="op">&amp;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>                         ((CA_stats.median_age <span class="op">&lt;</span> <span class="fl">35.5</span>) <span class="op">|</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>                         (CA_stats.density <span class="op">&gt;</span> <span class="dv">1400</span>) <span class="op">|</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>                         (CA_stats.high_earners <span class="op">&gt;</span> <span class="dv">500000</span>)))]</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>sel_counties.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div>


<table class="dataframe table table-sm table-striped">
<thead>
<tr>
<th>
</th>
<th>
GEOID
</th>
<th>
name
</th>
<th>
area_sqkm
</th>
<th>
geometry
</th>
<th>
population
</th>
<th>
high_earners
</th>
<th>
median_age
</th>
<th>
density
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
5
</th>
<td>
6037
</td>
<td>
Los Angeles County
</td>
<td>
12305.376879
</td>
<td>
MULTIPOLYGON (((-118.66761 33.47749, -118.6682…
</td>
<td>
10105518
</td>
<td>
501413
</td>
<td>
36.0
</td>
<td>
821.227834
</td>
</tr>
<tr>
<th>
8
</th>
<td>
6073
</td>
<td>
San Diego County
</td>
<td>
11721.342229
</td>
<td>
POLYGON ((-117.43744 33.17953, -117.44955 33.1…
</td>
<td>
3343364
</td>
<td>
194676
</td>
<td>
35.4
</td>
<td>
285.237299
</td>
</tr>
<tr>
<th>
10
</th>
<td>
6075
</td>
<td>
San Francisco County
</td>
<td>
600.588247
</td>
<td>
MULTIPOLYGON (((-122.60025 37.80249, -122.6123…
</td>
<td>
883305
</td>
<td>
114989
</td>
<td>
38.3
</td>
<td>
1470.733077
</td>
</tr>
</tbody>

</table>
</div>
</section>
<section id="당신은-몇-개의-상점을-확인했습니까" class="level3" data-number="2.5">
<h3 data-number="2.5" class="anchored" data-anchor-id="당신은-몇-개의-상점을-확인했습니까"><span class="header-section-number">2.5</span> 5) 당신은 몇 개의 상점을 확인했습니까?</h3>
<p>다음 스타벅스 리저브 로스터리 위치를 찾을 때는 선택한 카운티 내의 모든 매장을 고려해야 합니다. 그렇다면, 선택된 카운티 내에 몇 개의 상점이 있을까요?</p>
<p>이 질문에 대한 답변을 준비하려면 다음 코드 셀을 실행하여 모든 스타벅스 위치와 함께 GeoDataFrame stabs_gdf를 만듭니다.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>starbucks_gdf <span class="op">=</span> gpd.GeoDataFrame(starbucks, geometry<span class="op">=</span>gpd.points_from_xy(starbucks.Longitude, starbucks.Latitude))</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>starbucks_gdf.crs <span class="op">=</span> {<span class="st">'init'</span>: <span class="st">'epsg:4326'</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>C:\Users\seong taek\anaconda3\lib\site-packages\pyproj\crs\crs.py:141: FutureWarning: '+init=&lt;authority&gt;:&lt;code&gt;' syntax is deprecated. '&lt;authority&gt;:&lt;code&gt;' is the preferred initialization method. When making the change, be mindful of axis order changes: https://pyproj4.github.io/pyproj/stable/gotchas.html#axis-order-changes-in-proj-6
  in_crs_string = _prepare_from_proj_string(in_crs_string)</code></pre>
<p>그렇다면, 당신이 선택한 county에는 몇 개의 가게가 있나요?</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fill in your answer</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>locations_of_interest <span class="op">=</span> gpd.sjoin(starbucks_gdf, sel_counties)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>num_stores <span class="op">=</span> <span class="bu">len</span>(locations_of_interest)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>num_stores</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>1043</code></pre>
<p>1043개</p>
</section>
<section id="저장소-위치를-시각화합니다." class="level3" data-number="2.6">
<h3 data-number="2.6" class="anchored" data-anchor-id="저장소-위치를-시각화합니다."><span class="header-section-number">2.6</span> 6) 저장소 위치를 시각화합니다.</h3>
<p>이전 질문에서 식별한 상점의 위치를 보여주는 맵을 만듭니다.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a base map</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>m_6 <span class="op">=</span> folium.Map(location<span class="op">=</span>[<span class="dv">37</span>,<span class="op">-</span><span class="dv">120</span>], zoom_start<span class="op">=</span><span class="dv">6</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Your code here: show selected store locations</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>mc <span class="op">=</span> MarkerCluster()</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>locations_of_interest <span class="op">=</span> gpd.sjoin(starbucks_gdf, sel_counties)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> idx, row <span class="kw">in</span> locations_of_interest.iterrows():</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> math.isnan(row[<span class="st">'Longitude'</span>]) <span class="kw">and</span> <span class="kw">not</span> math.isnan(row[<span class="st">'Latitude'</span>]):</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>        mc.add_child(folium.Marker([row[<span class="st">'Latitude'</span>], row[<span class="st">'Longitude'</span>]]))</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>m_6.add_child(mc)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the map</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>embed_map(m_6, <span class="st">'q_6.html'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<iframe width="100%" height="500px" src="q_6.html" frameborder="0" allowfullscreen="">
</iframe>
</section>
</section>
<section id="keep-going" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="keep-going"><span class="header-section-number">3</span> Keep going</h2>
<p>Learn about how <strong><a href="https://www.kaggle.com/alexisbcook/proximity-analysis">proximity analysis</a></strong> can help you to understand the relationships between points on a map.</p>
<hr>
<p><em>Have questions or comments? Visit the <a href="https://www.kaggle.com/learn/geospatial-analysis/discussion">course discussion forum</a> to chat with other learners.</em></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, Seongtaek</div>   
  </div>
</footer>



</body></html>