<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Seongtaek">
<meta name="dcterms.date" content="2023-04-22">

<title>Taek_Blog - Spatial_Info_Analysis CH2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Taek_Blog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">Profile</span></a>
  </li>  
  <li class="nav-item dropdown  compact">
    <a class="nav-link dropdown-toggle" href="#" id="" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="">    
        <li>
    <a class="dropdown-item" href="https://www.instagram.com/keatgnus/"><i class="bi bi-instagram" role="img">
</i> 
 <span class="dropdown-text">instagram</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://github.com/keatgnus"><i class="bi bi-github" role="img">
</i> 
 <span class="dropdown-text">github</span></a>
  </li>  
    </ul>
  </li>
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Spatial_Info_Analysis CH2</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">code</div>
                <div class="quarto-category">Spatial_Info_Analysis</div>
                <div class="quarto-category">rstudio</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Seongtaek </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 22, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#공간-정보-분석-ch3-attribute-data-operations" id="toc-공간-정보-분석-ch3-attribute-data-operations" class="nav-link active" data-scroll-target="#공간-정보-분석-ch3-attribute-data-operations"><span class="toc-section-number">1</span>  공간 정보 분석 CH3 : Attribute data operations</a></li>
  <li><a href="#패키지-불러오기" id="toc-패키지-불러오기" class="nav-link" data-scroll-target="#패키지-불러오기"><span class="toc-section-number">2</span>  패키지 불러오기</a></li>
  <li><a href="#속성데이터-벡터-vs-래스터" id="toc-속성데이터-벡터-vs-래스터" class="nav-link" data-scroll-target="#속성데이터-벡터-vs-래스터"><span class="toc-section-number">3</span>  3.1 속성데이터 (벡터 vs 래스터)</a></li>
  <li><a href="#spdata-세계-나라-데이터world" id="toc-spdata-세계-나라-데이터world" class="nav-link" data-scroll-target="#spdata-세계-나라-데이터world"><span class="toc-section-number">4</span>  spData : 세계 나라 데이터(world)</a></li>
  <li><a href="#sf-객체에서-속성-정보만-가져오기-st_drop_geometry" id="toc-sf-객체에서-속성-정보만-가져오기-st_drop_geometry" class="nav-link" data-scroll-target="#sf-객체에서-속성-정보만-가져오기-st_drop_geometry"><span class="toc-section-number">5</span>  sf 객체에서 속성 정보만 가져오기 : st_drop_geometry()</a></li>
  <li><a href="#base-r-구문으로-벡터-데이터-속성정보의-차원-가져오기" id="toc-base-r-구문으로-벡터-데이터-속성정보의-차원-가져오기" class="nav-link" data-scroll-target="#base-r-구문으로-벡터-데이터-속성정보의-차원-가져오기"><span class="toc-section-number">6</span>  Base R 구문으로 벡터 데이터 속성정보의 차원 가져오기</a>
  <ul>
  <li><a href="#위치-지정해서-지리공간-벡터-데이터-가져오기" id="toc-위치-지정해서-지리공간-벡터-데이터-가져오기" class="nav-link" data-scroll-target="#위치-지정해서-지리공간-벡터-데이터-가져오기"><span class="toc-section-number">6.0.1</span>  1. 위치 지정해서 지리공간 벡터 데이터 가져오기</a></li>
  <li><a href="#열이름-사용해서-지리공간-벡터-데이터-열-가져오기" id="toc-열이름-사용해서-지리공간-벡터-데이터-열-가져오기" class="nav-link" data-scroll-target="#열이름-사용해서-지리공간-벡터-데이터-열-가져오기"><span class="toc-section-number">6.0.2</span>  2. 열이름 사용해서 지리공간 벡터 데이터 열 가져오기</a></li>
  <li><a href="#논리-벡터-사용해서-데이터-가져오기" id="toc-논리-벡터-사용해서-데이터-가져오기" class="nav-link" data-scroll-target="#논리-벡터-사용해서-데이터-가져오기"><span class="toc-section-number">6.1</span>  3. 논리 벡터 사용해서 데이터 가져오기</a></li>
  </ul></li>
  <li><a href="#dplyr-패키지로-벡터-데이터-속성정보-차원-가져오기" id="toc-dplyr-패키지로-벡터-데이터-속성정보-차원-가져오기" class="nav-link" data-scroll-target="#dplyr-패키지로-벡터-데이터-속성정보-차원-가져오기"><span class="toc-section-number">7</span>  dplyr 패키지로 벡터 데이터 속성정보 차원 가져오기</a></li>
  <li><a href="#data.table로-벡터-데이터의-속성정보-그룹별-집계" id="toc-data.table로-벡터-데이터의-속성정보-그룹별-집계" class="nav-link" data-scroll-target="#data.table로-벡터-데이터의-속성정보-그룹별-집계"><span class="toc-section-number">8</span>  data.table로 벡터 데이터의 속성정보 그룹별 집계</a></li>
  <li><a href="#두개의-지리-벡터-데이터-테이블-join-하기" id="toc-두개의-지리-벡터-데이터-테이블-join-하기" class="nav-link" data-scroll-target="#두개의-지리-벡터-데이터-테이블-join-하기"><span class="toc-section-number">9</span>  두개의 지리 벡터 데이터 테이블 <code>join</code> 하기</a></li>
  <li><a href="#지리-벡터-데이터의-새로운-속성-만들기지리정보-제거하기" id="toc-지리-벡터-데이터의-새로운-속성-만들기지리정보-제거하기" class="nav-link" data-scroll-target="#지리-벡터-데이터의-새로운-속성-만들기지리정보-제거하기"><span class="toc-section-number">10</span>  지리 벡터 데이터의 새로운 속성 만들기/지리정보 제거하기</a></li>
  <li><a href="#래스터-객체-조작" id="toc-래스터-객체-조작" class="nav-link" data-scroll-target="#래스터-객체-조작"><span class="toc-section-number">11</span>  래스터 객체 조작</a></li>
  <li><a href="#래스터-부분-설정" id="toc-래스터-부분-설정" class="nav-link" data-scroll-target="#래스터-부분-설정"><span class="toc-section-number">12</span>  래스터 부분 설정</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<table align="bottom">
<tbody><tr><td>
<a target="_blank" href="공간정보분석-CH3.html"><img src="r_logo.png">HTML파일로 보기</a>
</td>

</tr></tbody></table>
<p>속성 데이터 - 벡터 &amp; 래스터</p>
<section id="공간-정보-분석-ch3-attribute-data-operations" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="공간-정보-분석-ch3-attribute-data-operations"><span class="header-section-number">1</span> 공간 정보 분석 CH3 : Attribute data operations</h2>
</section>
<section id="패키지-불러오기" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="패키지-불러오기"><span class="header-section-number">2</span> 패키지 불러오기</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(raster)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr) <span class="co"># for working with strings (pattern matching)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)   <span class="co"># for unite() and separate()</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spData)  <span class="co"># 데이터 세트를 로드</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="속성데이터-벡터-vs-래스터" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="속성데이터-벡터-vs-래스터"><span class="header-section-number">3</span> 3.1 속성데이터 (벡터 vs 래스터)</h2>
<ul>
<li>지리공간 벡터 데이터
<ul>
<li>점, 선, 면 등의 리스트로 이뤄진 지리공간 데이터</li>
<li>지리공간 데이터 제외한 속성데이터</li>
</ul></li>
<li>sf 객체: 벡터 데이터에서 속성 정보 가져옴, 클래스 지원
<ul>
<li>속성 정보만 가져오기 : st_drop_geometry()</li>
<li>base R 구문, dplyr : 벡더 데이터 속성 정보의 dim</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">### sf 객체 methods</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(<span class="at">class =</span> <span class="st">'sf'</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "$&lt;-.sf"       "[.sf"         "[[&lt;-.sf"      "aggregate.sf" "anti_join.sf"
[6] "arrange.sf"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(<span class="at">class =</span> <span class="st">'sf'</span>) <span class="sc">%&gt;%</span> <span class="fu">tail</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "summarise.sf" "transform.sf" "transmute.sf" "ungroup.sf"   "unite.sf"    
[6] "unnest.sf"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">methods</span>(<span class="at">class =</span> <span class="st">'sf'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 123</code></pre>
</div>
</div>
</section>
<section id="spdata-세계-나라-데이터world" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="spdata-세계-나라-데이터world"><span class="header-section-number">4</span> spData : 세계 나라 데이터(world)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 10개의 속성 데이터, 1개의 지리기하 열</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(world)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 177  11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>world</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 177 features and 10 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 177 × 11
   iso_a2 name_l…¹ conti…² regio…³ subre…⁴ type  area_…⁵     pop lifeExp gdpPe…⁶
 * &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 FJ     Fiji     Oceania Oceania Melane… Sove…  1.93e4  8.86e5    70.0   8222.
 2 TZ     Tanzania Africa  Africa  Easter… Sove…  9.33e5  5.22e7    64.2   2402.
 3 EH     Western… Africa  Africa  Northe… Inde…  9.63e4 NA         NA       NA 
 4 CA     Canada   North … Americ… Northe… Sove…  1.00e7  3.55e7    82.0  43079.
 5 US     United … North … Americ… Northe… Coun…  9.51e6  3.19e8    78.8  51922.
 6 KZ     Kazakhs… Asia    Asia    Centra… Sove…  2.73e6  1.73e7    71.6  23587.
 7 UZ     Uzbekis… Asia    Asia    Centra… Sove…  4.61e5  3.08e7    71.0   5371.
 8 PG     Papua N… Oceania Oceania Melane… Sove…  4.65e5  7.76e6    65.2   3709.
 9 ID     Indones… Asia    Asia    South-… Sove…  1.82e6  2.55e8    68.9  10003.
10 AR     Argenti… South … Americ… South … Sove…  2.78e6  4.30e7    76.3  18798.
# … with 167 more rows, 1 more variable: geom &lt;MULTIPOLYGON [°]&gt;, and
#   abbreviated variable names ¹​name_long, ²​continent, ³​region_un, ⁴​subregion,
#   ⁵​area_km2, ⁶​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "iso_a2"    "name_long" "continent" "region_un" "subregion" "type"     
 [7] "area_km2"  "pop"       "lifeExp"   "gdpPercap" "geom"     </code></pre>
</div>
</div>
</section>
<section id="sf-객체에서-속성-정보만-가져오기-st_drop_geometry" class="level2" data-number="5">
<h2 data-number="5" class="anchored" data-anchor-id="sf-객체에서-속성-정보만-가져오기-st_drop_geometry"><span class="header-section-number">5</span> sf 객체에서 속성 정보만 가져오기 : st_drop_geometry()</h2>
<ul>
<li>점, 선, 면 등의 지리기하 데이터를 리스트로 갖는 geom 컬럼 항상 존재</li>
<li>geom 컬럼을 제거하고 나머지 속성 정보만으로 d.f 만들 때 사용</li>
<li>geom 컬럼 : 지리기하 리스트 정보를 가지기때문에 메모리 점유 큼</li>
<li>사용할 필요 없으면 웬만하면 제거하기</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">### geom 컬럼 제거</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>world_df <span class="ot">=</span> <span class="fu">st_drop_geometry</span>(world)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>world_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 177 × 10
   iso_a2 name_l…¹ conti…² regio…³ subre…⁴ type  area_…⁵     pop lifeExp gdpPe…⁶
 * &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 FJ     Fiji     Oceania Oceania Melane… Sove…  1.93e4  8.86e5    70.0   8222.
 2 TZ     Tanzania Africa  Africa  Easter… Sove…  9.33e5  5.22e7    64.2   2402.
 3 EH     Western… Africa  Africa  Northe… Inde…  9.63e4 NA         NA       NA 
 4 CA     Canada   North … Americ… Northe… Sove…  1.00e7  3.55e7    82.0  43079.
 5 US     United … North … Americ… Northe… Coun…  9.51e6  3.19e8    78.8  51922.
 6 KZ     Kazakhs… Asia    Asia    Centra… Sove…  2.73e6  1.73e7    71.6  23587.
 7 UZ     Uzbekis… Asia    Asia    Centra… Sove…  4.61e5  3.08e7    71.0   5371.
 8 PG     Papua N… Oceania Oceania Melane… Sove…  4.65e5  7.76e6    65.2   3709.
 9 ID     Indones… Asia    Asia    South-… Sove…  1.82e6  2.55e8    68.9  10003.
10 AR     Argenti… South … Americ… South … Sove…  2.78e6  4.30e7    76.3  18798.
# … with 167 more rows, and abbreviated variable names ¹​name_long, ²​continent,
#   ³​region_un, ⁴​subregion, ⁵​area_km2, ⁶​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(world_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "iso_a2"    "name_long" "continent" "region_un" "subregion" "type"     
 [7] "area_km2"  "pop"       "lifeExp"   "gdpPercap"</code></pre>
</div>
</div>
</section>
<section id="base-r-구문으로-벡터-데이터-속성정보의-차원-가져오기" class="level2" data-number="6">
<h2 data-number="6" class="anchored" data-anchor-id="base-r-구문으로-벡터-데이터-속성정보의-차원-가져오기"><span class="header-section-number">6</span> Base R 구문으로 벡터 데이터 속성정보의 차원 가져오기</h2>
<ul>
<li>행, 열 가져올때 df[i,j], subset() 등 활용
<ul>
<li>i행, j열에는 정수로 위치 파악</li>
<li>j열의 이름 사용</li>
<li>논리 벡터 사용가능 subset 등</li>
</ul></li>
<li>dplyr 패키지 : select(), filter(), pull() 등 _ 특정 행, 열의 부분집합 가져오면 끝에 geom 칼럼 따라옴</li>
</ul>
<section id="위치-지정해서-지리공간-벡터-데이터-가져오기" class="level4" data-number="6.0.1">
<h4 data-number="6.0.1" class="anchored" data-anchor-id="위치-지정해서-지리공간-벡터-데이터-가져오기"><span class="header-section-number">6.0.1</span> 1. 위치 지정해서 지리공간 벡터 데이터 가져오기</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 1행 ~ 6행 정보</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>world[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 6 features and 10 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -18.28799 xmax: 180 ymax: 83.23324
Geodetic CRS:  WGS 84
# A tibble: 6 × 11
  iso_a2 name_long conti…¹ regio…² subre…³ type  area_…⁴     pop lifeExp gdpPe…⁵
  &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 FJ     Fiji      Oceania Oceania Melane… Sove…  1.93e4  8.86e5    70.0   8222.
2 TZ     Tanzania  Africa  Africa  Easter… Sove…  9.33e5  5.22e7    64.2   2402.
3 EH     Western … Africa  Africa  Northe… Inde…  9.63e4 NA         NA       NA 
4 CA     Canada    North … Americ… Northe… Sove…  1.00e7  3.55e7    82.0  43079.
5 US     United S… North … Americ… Northe… Coun…  9.51e6  3.19e8    78.8  51922.
6 KZ     Kazakhst… Asia    Asia    Centra… Sove…  2.73e6  1.73e7    71.6  23587.
# … with 1 more variable: geom &lt;MULTIPOLYGON [°]&gt;, and abbreviated variable
#   names ¹​continent, ²​region_un, ³​subregion, ⁴​area_km2, ⁵​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 1열 ~ 3열 정보</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>world[,<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 177 features and 3 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 177 × 4
   iso_a2 name_long        continent                                        geom
   &lt;chr&gt;  &lt;chr&gt;            &lt;chr&gt;                              &lt;MULTIPOLYGON [°]&gt;
 1 FJ     Fiji             Oceania       (((-180 -16.55522, -179.9174 -16.50178…
 2 TZ     Tanzania         Africa        (((33.90371 -0.95, 31.86617 -1.02736, …
 3 EH     Western Sahara   Africa        (((-8.66559 27.65643, -8.817828 27.656…
 4 CA     Canada           North America (((-132.71 54.04001, -133.18 54.16998,…
 5 US     United States    North America (((-171.7317 63.78252, -171.7911 63.40…
 6 KZ     Kazakhstan       Asia          (((87.35997 49.21498, 86.82936 49.8266…
 7 UZ     Uzbekistan       Asia          (((55.96819 41.30864, 57.09639 41.3223…
 8 PG     Papua New Guinea Oceania       (((141.0002 -2.600151, 141.0171 -5.859…
 9 ID     Indonesia        Asia          (((104.37 -1.084843, 104.0108 -1.05921…
10 AR     Argentina        South America (((-68.63401 -52.63637, -68.63335 -54.…
# … with 167 more rows</code></pre>
</div>
</div>
</section>
<section id="열이름-사용해서-지리공간-벡터-데이터-열-가져오기" class="level4" data-number="6.0.2">
<h4 data-number="6.0.2" class="anchored" data-anchor-id="열이름-사용해서-지리공간-벡터-데이터-열-가져오기"><span class="header-section-number">6.0.2</span> 2. 열이름 사용해서 지리공간 벡터 데이터 열 가져오기</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>world[, <span class="fu">c</span>(<span class="st">'name_long'</span>, <span class="st">'lifeExp'</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 177 features and 2 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 177 × 3
   name_long        lifeExp                                                 geom
   &lt;chr&gt;              &lt;dbl&gt;                                   &lt;MULTIPOLYGON [°]&gt;
 1 Fiji                70.0 (((-180 -16.55522, -179.9174 -16.50178, -179.7933 -…
 2 Tanzania            64.2 (((33.90371 -0.95, 31.86617 -1.02736, 30.76986 -1.0…
 3 Western Sahara      NA   (((-8.66559 27.65643, -8.817828 27.65643, -8.794884…
 4 Canada              82.0 (((-132.71 54.04001, -133.18 54.16998, -133.2397 53…
 5 United States       78.8 (((-171.7317 63.78252, -171.7911 63.40585, -171.553…
 6 Kazakhstan          71.6 (((87.35997 49.21498, 86.82936 49.82667, 85.54127 4…
 7 Uzbekistan          71.0 (((55.96819 41.30864, 57.09639 41.32231, 56.93222 4…
 8 Papua New Guinea    65.2 (((141.0002 -2.600151, 141.0171 -5.859022, 141.0339…
 9 Indonesia           68.9 (((104.37 -1.084843, 104.0108 -1.059212, 103.4376 -…
10 Argentina           76.3 (((-68.63401 -52.63637, -68.63335 -54.8695, -67.562…
# … with 167 more rows</code></pre>
</div>
</div>
</section>
<section id="논리-벡터-사용해서-데이터-가져오기" class="level3" data-number="6.1">
<h3 data-number="6.1" class="anchored" data-anchor-id="논리-벡터-사용해서-데이터-가져오기"><span class="header-section-number">6.1</span> 3. 논리 벡터 사용해서 데이터 가져오기</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>sel_area <span class="ot">&lt;-</span>  world<span class="sc">$</span>area_km2 <span class="sc">&lt;</span> <span class="dv">10000</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(sel_area)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Mode   FALSE    TRUE 
logical     170       7 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>small_countries <span class="ot">&lt;-</span>  world[sel_area, ]</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>small_countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 7 features and 10 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -67.24243 ymin: -16.59785 xmax: 167.8449 ymax: 50.12805
Geodetic CRS:  WGS 84
# A tibble: 7 × 11
  iso_a2 name_long conti…¹ regio…² subre…³ type  area_…⁴     pop lifeExp gdpPe…⁵
  &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 PR     Puerto R… North … Americ… Caribb… Depe…   9225. 3534874    79.4  35066.
2 PS     Palestine Asia    Asia    Wester… Disp…   5037. 4294682    73.1   4320.
3 VU     Vanuatu   Oceania Oceania Melane… Sove…   7490.  258850    71.7   2892.
4 LU     Luxembou… Europe  Europe  Wester… Sove…   2417.  556319    82.2  93655.
5 &lt;NA&gt;   Northern… Asia    Asia    Wester… Sove…   3786.      NA    NA       NA 
6 CY     Cyprus    Asia    Asia    Wester… Sove…   6207. 1152309    80.2  29786.
7 TT     Trinidad… North … Americ… Caribb… Sove…   7738. 1354493    70.4  31182.
# … with 1 more variable: geom &lt;MULTIPOLYGON [°]&gt;, and abbreviated variable
#   names ¹​continent, ²​region_un, ³​subregion, ⁴​area_km2, ⁵​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>small_countries <span class="ot">&lt;-</span> world[world<span class="sc">$</span>area_km2 <span class="sc">&lt;</span> <span class="dv">10000</span>, ]</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>small_countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 7 features and 10 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -67.24243 ymin: -16.59785 xmax: 167.8449 ymax: 50.12805
Geodetic CRS:  WGS 84
# A tibble: 7 × 11
  iso_a2 name_long conti…¹ regio…² subre…³ type  area_…⁴     pop lifeExp gdpPe…⁵
  &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 PR     Puerto R… North … Americ… Caribb… Depe…   9225. 3534874    79.4  35066.
2 PS     Palestine Asia    Asia    Wester… Disp…   5037. 4294682    73.1   4320.
3 VU     Vanuatu   Oceania Oceania Melane… Sove…   7490.  258850    71.7   2892.
4 LU     Luxembou… Europe  Europe  Wester… Sove…   2417.  556319    82.2  93655.
5 &lt;NA&gt;   Northern… Asia    Asia    Wester… Sove…   3786.      NA    NA       NA 
6 CY     Cyprus    Asia    Asia    Wester… Sove…   6207. 1152309    80.2  29786.
7 TT     Trinidad… North … Americ… Caribb… Sove…   7738. 1354493    70.4  31182.
# … with 1 more variable: geom &lt;MULTIPOLYGON [°]&gt;, and abbreviated variable
#   names ¹​continent, ²​region_un, ³​subregion, ⁴​area_km2, ⁵​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>small_countries <span class="ot">&lt;-</span> <span class="fu">subset</span>(world, area_km2 <span class="sc">&lt;</span> <span class="dv">10000</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>small_countries</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 7 features and 10 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -67.24243 ymin: -16.59785 xmax: 167.8449 ymax: 50.12805
Geodetic CRS:  WGS 84
# A tibble: 7 × 11
  iso_a2 name_long conti…¹ regio…² subre…³ type  area_…⁴     pop lifeExp gdpPe…⁵
  &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 PR     Puerto R… North … Americ… Caribb… Depe…   9225. 3534874    79.4  35066.
2 PS     Palestine Asia    Asia    Wester… Disp…   5037. 4294682    73.1   4320.
3 VU     Vanuatu   Oceania Oceania Melane… Sove…   7490.  258850    71.7   2892.
4 LU     Luxembou… Europe  Europe  Wester… Sove…   2417.  556319    82.2  93655.
5 &lt;NA&gt;   Northern… Asia    Asia    Wester… Sove…   3786.      NA    NA       NA 
6 CY     Cyprus    Asia    Asia    Wester… Sove…   6207. 1152309    80.2  29786.
7 TT     Trinidad… North … Americ… Caribb… Sove…   7738. 1354493    70.4  31182.
# … with 1 more variable: geom &lt;MULTIPOLYGON [°]&gt;, and abbreviated variable
#   names ¹​continent, ²​region_un, ³​subregion, ⁴​area_km2, ⁵​gdpPercap</code></pre>
</div>
</div>
</section>
</section>
<section id="dplyr-패키지로-벡터-데이터-속성정보-차원-가져오기" class="level2" data-number="7">
<h2 data-number="7" class="anchored" data-anchor-id="dplyr-패키지로-벡터-데이터-속성정보-차원-가져오기"><span class="header-section-number">7</span> dplyr 패키지로 벡터 데이터 속성정보 차원 가져오기</h2>
<ul>
<li>가독성 좋고 속도 빠름</li>
<li>체인 (%&gt;%) 사용가능</li>
<li>select(), slice(), filter(), pull() 등의 함수 사용가능</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="do">### select로 강력하게 지정가능</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 선택지정</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>world1 <span class="ot">&lt;-</span> <span class="fu">select</span>(world, name_long, pop)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "name_long" "pop"       "geom"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 범위지정</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>world2 <span class="ot">&lt;-</span> <span class="fu">select</span>(world, name_long<span class="sc">:</span>pop)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "name_long" "continent" "region_un" "subregion" "type"      "area_km2" 
[7] "pop"       "geom"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 컬럼 번호로 선택지정</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>world3 <span class="ot">&lt;-</span> <span class="fu">select</span>(world,<span class="dv">2</span>,<span class="dv">7</span>)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "name_long" "area_km2"  "geom"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 특정 컬럼 제외</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>world4 <span class="ot">&lt;-</span> <span class="fu">select</span>(world, <span class="sc">-</span>subregion, <span class="sc">-</span>area_km2)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "iso_a2"    "name_long" "continent" "region_un" "type"      "pop"      
[7] "lifeExp"   "gdpPercap" "geom"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 컬럼 이름 재설정</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>world5 <span class="ot">&lt;-</span> <span class="fu">select</span>(world, name_long, <span class="at">population =</span> pop)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "name_long"  "population" "geom"      </code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 특정 단어가 포함된 열 추출</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>world6 <span class="ot">&lt;-</span> <span class="fu">select</span>(world, <span class="fu">contains</span>(<span class="st">'Ex'</span>)) </span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "lifeExp" "geom"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 특정 단어로 시작하는 열 추출</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>world7  <span class="ot">&lt;-</span> <span class="fu">select</span>(world, <span class="fu">starts_with</span>(<span class="st">'life'</span>)) </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "lifeExp" "geom"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 특정 단어로 끝나는 열 추출</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>world8 <span class="ot">&lt;-</span>  <span class="fu">select</span>(world, <span class="fu">ends_with</span>(<span class="st">'Exp'</span>)) </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world8)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "lifeExp" "geom"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 특정 단어의 소문자 or 대문자 포함된 열 추출</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>world9 <span class="ot">&lt;-</span>  <span class="fu">select</span>(world, <span class="fu">matches</span>(<span class="st">"[p]"</span>)) </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world9)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "type"      "pop"       "lifeExp"   "gdpPercap" "geom"     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="do">### num_range() 함수</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span><span class="sc">:</span><span class="dv">10</span>) </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>x3 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">11</span><span class="sc">:</span><span class="dv">15</span>) </span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>x4 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">16</span><span class="sc">:</span><span class="dv">20</span>) </span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>x5 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">21</span><span class="sc">:</span><span class="dv">25</span>)</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x1, x2, x3, x4, x5) </span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x1 x2 x3 x4 x5
1  1  6 11 16 21
2  2  7 12 17 22
3  3  8 13 18 23
4  4  9 14 19 24
5  5 10 15 20 25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">select</span>(df, <span class="fu">num_range</span>(<span class="st">"x"</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>))</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x1 x2 x3
1  1  6 11
2  2  7 12
3  3  8 13
4  4  9 14
5  5 10 15</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="do">### filter() 함수 subset과 비슷</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 조건 걸기</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>world10  <span class="ot">&lt;-</span>  <span class="fu">filter</span>(world, lifeExp <span class="sc">&gt;</span> <span class="dv">82</span>)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>world10</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 9 features and 10 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -24.32618 ymin: -43.6346 xmax: 153.5695 ymax: 69.10625
Geodetic CRS:  WGS 84
# A tibble: 9 × 11
  iso_a2 name_long  conti…¹ regio…² subre…³ type  area_…⁴    pop lifeExp gdpPe…⁵
* &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 IL     Israel     Asia    Asia    Wester… Coun…  2.30e4 8.22e6    82.2  31702.
2 SE     Sweden     Europe  Europe  Northe… Sove…  4.51e5 9.70e6    82.3  44168.
3 CH     Switzerla… Europe  Europe  Wester… Sove…  4.62e4 8.19e6    83.2  57218.
4 LU     Luxembourg Europe  Europe  Wester… Sove…  2.42e3 5.56e5    82.2  93655.
5 ES     Spain      Europe  Europe  Southe… Sove…  5.02e5 4.65e7    83.2  31195.
6 AU     Australia  Oceania Oceania Austra… Coun…  7.69e6 2.35e7    82.3  43547.
7 IT     Italy      Europe  Europe  Southe… Sove…  3.15e5 6.08e7    83.1  33946.
8 IS     Iceland    Europe  Europe  Northe… Sove…  1.08e5 3.27e5    82.9  41701.
9 JP     Japan      Asia    Asia    Easter… Sove…  4.05e5 1.27e8    83.6  37337.
# … with 1 more variable: geom &lt;MULTIPOLYGON [°]&gt;, and abbreviated variable
#   names ¹​continent, ²​region_un, ³​subregion, ⁴​area_km2, ⁵​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 체인(%&gt;%) 활용, 가독성 좋음</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>world11 <span class="ot">&lt;-</span>  world <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">"Asia"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name_long, continent) <span class="sc">%&gt;%</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>world11</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 5 features and 2 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: 34.26543 ymin: -10.35999 xmax: 141.0339 ymax: 55.38525
Geodetic CRS:  WGS 84
# A tibble: 5 × 3
  name_long   continent                                                     geom
  &lt;chr&gt;       &lt;chr&gt;                                           &lt;MULTIPOLYGON [°]&gt;
1 Kazakhstan  Asia      (((87.35997 49.21498, 86.82936 49.82667, 85.54127 49.69…
2 Uzbekistan  Asia      (((55.96819 41.30864, 57.09639 41.32231, 56.93222 41.82…
3 Indonesia   Asia      (((104.37 -1.084843, 104.0108 -1.059212, 103.4376 -0.71…
4 Timor-Leste Asia      (((124.9687 -8.89279, 125.07 -9.089987, 125.0885 -9.393…
5 Israel      Asia      (((35.71992 32.70919, 35.7008 32.71601, 35.8364 32.8681…</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="do">### aggregate() 함수 사용해서 그룹별로 집계</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="co"># x(속성정보:인구) ~ group(그룹:대륙), sum집계</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>world_agg1  <span class="ot">&lt;-</span>  <span class="fu">aggregate</span>(pop <span class="sc">~</span> continent, <span class="at">FUN =</span> sum, <span class="at">data =</span> world, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>world_agg1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      continent        pop
1        Africa 1154946633
2          Asia 4311408059
3        Europe  669036256
4 North America  565028684
5       Oceania   37757833
6 South America  412060811</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(world_agg1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   6 obs. of  2 variables:
 $ continent: chr  "Africa" "Asia" "Europe" "North America" ...
 $ pop      : num  1.15e+09 4.31e+09 6.69e+08 5.65e+08 3.78e+07 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(world_agg1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 2번째 방법</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>world_agg2  <span class="ot">&lt;-</span>  <span class="fu">aggregate</span>(world[<span class="st">"pop"</span>], <span class="at">by =</span> <span class="fu">list</span>(world<span class="sc">$</span>continent),</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">FUN =</span> sum, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>world_agg2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 8 features and 2 fields
Attribute-geometry relationship: 0 constant, 1 aggregate, 1 identity
Geometry type: GEOMETRY
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
                  Group.1        pop                       geometry
1                  Africa 1154946633 MULTIPOLYGON (((11.91496 -5...
2              Antarctica          0 MULTIPOLYGON (((-61.13898 -...
3                    Asia 4311408059 MULTIPOLYGON (((120.295 -10...
4                  Europe  669036256 MULTIPOLYGON (((-53.77852 2...
5           North America  565028684 MULTIPOLYGON (((-80.9473 8....
6                 Oceania   37757833 MULTIPOLYGON (((171.9487 -4...
7 Seven seas (open ocean)          0 POLYGON ((68.935 -48.625, 6...
8           South America  412060811 MULTIPOLYGON (((-57.75 -51....</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(world_agg2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "sf"         "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sf 객체는 집계 결과가 sf 객체로 반환</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>world[<span class="st">'pop'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 177 features and 1 field
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 177 × 2
         pop                                                                geom
       &lt;dbl&gt;                                                  &lt;MULTIPOLYGON [°]&gt;
 1    885806 (((-180 -16.55522, -179.9174 -16.50178, -179.7933 -16.02088, -180 …
 2  52234869 (((33.90371 -0.95, 31.86617 -1.02736, 30.76986 -1.01455, 30.4191 -…
 3        NA (((-8.66559 27.65643, -8.817828 27.65643, -8.794884 27.1207, -9.41…
 4  35535348 (((-132.71 54.04001, -133.18 54.16998, -133.2397 53.85108, -133.05…
 5 318622525 (((-171.7317 63.78252, -171.7911 63.40585, -171.5531 63.31779, -17…
 6  17288285 (((87.35997 49.21498, 86.82936 49.82667, 85.54127 49.69286, 85.115…
 7  30757700 (((55.96819 41.30864, 57.09639 41.32231, 56.93222 41.82603, 57.786…
 8   7755785 (((141.0002 -2.600151, 141.0171 -5.859022, 141.0339 -9.117893, 142…
 9 255131116 (((104.37 -1.084843, 104.0108 -1.059212, 103.4376 -0.7119459, 103.…
10  42981515 (((-68.63401 -52.63637, -68.63335 -54.8695, -67.56244 -54.87001, -…
# … with 167 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(world[<span class="st">'pop'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "sf"         "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 숫자형 벡터는 aggregate 적용하면 d.f로 반환</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>world<span class="sc">$</span>pop <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]    885806  52234869        NA  35535348 318622525  17288285</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(world<span class="sc">$</span>pop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="do">### group_by + summarize : aggregate보다 가독성 좋음</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 대륙별 인구의 합계</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>world_agg3  <span class="ot">&lt;-</span>  world <span class="sc">%&gt;%</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">pop =</span> <span class="fu">sum</span>(pop, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>world_agg3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 8 features and 2 fields
Geometry type: GEOMETRY
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 8 × 3
  continent                      pop                                        geom
  &lt;chr&gt;                        &lt;dbl&gt;                              &lt;GEOMETRY [°]&gt;
1 Africa                  1154946633 MULTIPOLYGON (((36.86623 22, 36.69069 22.2…
2 Antarctica                       0 MULTIPOLYGON (((-180 -89.9, 180 -89.9, 180…
3 Asia                    4311408059 MULTIPOLYGON (((36.14976 35.82153, 35.9050…
4 Europe                   669036256 MULTIPOLYGON (((26.29 35.29999, 25.74502 3…
5 North America            565028684 MULTIPOLYGON (((-82.26815 23.18861, -82.51…
6 Oceania                   37757833 MULTIPOLYGON (((166.7932 -15.66881, 167.00…
7 Seven seas (open ocean)          0 POLYGON ((68.935 -48.625, 68.8675 -48.83, …
8 South America            412060811 MULTIPOLYGON (((-66.95992 -54.89681, -66.4…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 대륙별 인구의 합계 + 대륙별 국가 수</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>world_agg4  <span class="ot">&lt;-</span>  world <span class="sc">%&gt;%</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">pop =</span> <span class="fu">sum</span>(pop, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">n_countries =</span> <span class="fu">n</span>())</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>world_agg4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 8 features and 3 fields
Geometry type: GEOMETRY
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 8 × 4
  continent                      pop n_countries                            geom
  &lt;chr&gt;                        &lt;dbl&gt;       &lt;int&gt;                  &lt;GEOMETRY [°]&gt;
1 Africa                  1154946633          51 MULTIPOLYGON (((36.86623 22, 3…
2 Antarctica                       0           1 MULTIPOLYGON (((-180 -89.9, 18…
3 Asia                    4311408059          47 MULTIPOLYGON (((36.14976 35.82…
4 Europe                   669036256          39 MULTIPOLYGON (((26.29 35.29999…
5 North America            565028684          18 MULTIPOLYGON (((-82.26815 23.1…
6 Oceania                   37757833           7 MULTIPOLYGON (((166.7932 -15.6…
7 Seven seas (open ocean)          0           1 POLYGON ((68.935 -48.625, 68.8…
8 South America            412060811          13 MULTIPOLYGON (((-66.95992 -54.…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 대륙별 인구의 합계 + 대륙별 국가 수 + 인구 탑3 대륙 + 인구 내림차순</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>world <span class="sc">%&gt;%</span> </span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pop, continent) <span class="sc">%&gt;%</span> </span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(continent) <span class="sc">%&gt;%</span> </span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">pop =</span> <span class="fu">sum</span>(pop, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">n_countries =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="at">n =</span> <span class="dv">3</span>, <span class="at">wt =</span> pop) <span class="sc">%&gt;%</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(pop)) <span class="sc">%&gt;%</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="co"># geom 컬럼 제거</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  continent        pop n_countries
* &lt;chr&gt;          &lt;dbl&gt;       &lt;int&gt;
1 Asia      4311408059          47
2 Africa    1154946633          51
3 Europe     669036256          39</code></pre>
</div>
</div>
</section>
<section id="data.table로-벡터-데이터의-속성정보-그룹별-집계" class="level2" data-number="8">
<h2 data-number="8" class="anchored" data-anchor-id="data.table로-벡터-데이터의-속성정보-그룹별-집계"><span class="header-section-number">8</span> data.table로 벡터 데이터의 속성정보 그룹별 집계</h2>
<ul>
<li>data.table 데이터 구조를 조작, 관리, 처리할 때 사용. 간결성</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("data.table")</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'data.table'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:dplyr':

    between, first, last</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:raster':

    shift</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>world_dt <span class="ot">&lt;-</span>  <span class="fu">data.table</span>(world)</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>world_dt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     iso_a2           name_long     continent region_un        subregion
  1:     FJ                Fiji       Oceania   Oceania        Melanesia
  2:     TZ            Tanzania        Africa    Africa   Eastern Africa
  3:     EH      Western Sahara        Africa    Africa  Northern Africa
  4:     CA              Canada North America  Americas Northern America
  5:     US       United States North America  Americas Northern America
 ---                                                                    
173:     RS              Serbia        Europe    Europe  Southern Europe
174:     ME          Montenegro        Europe    Europe  Southern Europe
175:     XK              Kosovo        Europe    Europe  Southern Europe
176:     TT Trinidad and Tobago North America  Americas        Caribbean
177:     SS         South Sudan        Africa    Africa   Eastern Africa
                  type    area_km2       pop  lifeExp gdpPercap     geom
  1: Sovereign country    19289.97    885806 69.96000  8222.254  &lt;XY[3]&gt;
  2: Sovereign country   932745.79  52234869 64.16300  2402.099  &lt;XY[1]&gt;
  3:     Indeterminate    96270.60        NA       NA        NA  &lt;XY[1]&gt;
  4: Sovereign country 10036042.98  35535348 81.95305 43079.143 &lt;XY[30]&gt;
  5:           Country  9510743.74 318622525 78.84146 51921.985 &lt;XY[10]&gt;
 ---                                                                    
173: Sovereign country    76388.61   7130576 75.33659 13112.909  &lt;XY[1]&gt;
174: Sovereign country    13443.68    621810 76.71200 14796.635  &lt;XY[1]&gt;
175: Sovereign country    11230.26   1821800 71.09756  8698.292  &lt;XY[1]&gt;
176: Sovereign country     7737.81   1354493 70.42600 31181.821  &lt;XY[1]&gt;
177: Sovereign country   624909.10  11530971 55.81700  1935.879  &lt;XY[1]&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 간결하게 top3 대륙 추출</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>world_dt[, .(<span class="at">pop =</span> <span class="fu">sum</span>(pop, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">n =</span> .N), by <span class="ot">=</span> <span class="fu">list</span>(continent)][<span class="fu">order</span>(<span class="sc">-</span>pop)][<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   continent        pop  n
1:      Asia 4311408059 47
2:    Africa 1154946633 51
3:    Europe  669036256 39</code></pre>
</div>
</div>
</section>
<section id="두개의-지리-벡터-데이터-테이블-join-하기" class="level2" data-number="9">
<h2 data-number="9" class="anchored" data-anchor-id="두개의-지리-벡터-데이터-테이블-join-하기"><span class="header-section-number">9</span> 두개의 지리 벡터 데이터 테이블 <code>join</code> 하기</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="do">### name_long 컬럼 기준으로 join</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>world_coffee <span class="ot">&lt;-</span>  <span class="fu">left_join</span>(world, coffee_data) <span class="co"># by='name_long'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(name_long)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>world_coffee</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 177 features and 12 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 177 × 13
   iso_a2 name_l…¹ conti…² regio…³ subre…⁴ type  area_…⁵     pop lifeExp gdpPe…⁶
   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 FJ     Fiji     Oceania Oceania Melane… Sove…  1.93e4  8.86e5    70.0   8222.
 2 TZ     Tanzania Africa  Africa  Easter… Sove…  9.33e5  5.22e7    64.2   2402.
 3 EH     Western… Africa  Africa  Northe… Inde…  9.63e4 NA         NA       NA 
 4 CA     Canada   North … Americ… Northe… Sove…  1.00e7  3.55e7    82.0  43079.
 5 US     United … North … Americ… Northe… Coun…  9.51e6  3.19e8    78.8  51922.
 6 KZ     Kazakhs… Asia    Asia    Centra… Sove…  2.73e6  1.73e7    71.6  23587.
 7 UZ     Uzbekis… Asia    Asia    Centra… Sove…  4.61e5  3.08e7    71.0   5371.
 8 PG     Papua N… Oceania Oceania Melane… Sove…  4.65e5  7.76e6    65.2   3709.
 9 ID     Indones… Asia    Asia    South-… Sove…  1.82e6  2.55e8    68.9  10003.
10 AR     Argenti… South … Americ… South … Sove…  2.78e6  4.30e7    76.3  18798.
# … with 167 more rows, 3 more variables: geom &lt;MULTIPOLYGON [°]&gt;,
#   coffee_production_2016 &lt;int&gt;, coffee_production_2017 &lt;int&gt;, and abbreviated
#   variable names ¹​name_long, ²​continent, ³​region_un, ⁴​subregion, ⁵​area_km2,
#   ⁶​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(world_coffee)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "sf"         "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(world_coffee)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "iso_a2"                 "name_long"              "continent"             
 [4] "region_un"              "subregion"              "type"                  
 [7] "area_km2"               "pop"                    "lifeExp"               
[10] "gdpPercap"              "geom"                   "coffee_production_2016"
[13] "coffee_production_2017"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(world_coffee[<span class="st">"coffee_production_2017"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="공간정보분석-CH3_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 두 데이터 셋에 같은 이름의 컬럼이 없는 경우</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="co"># coffee_data의 name_long변수 이름을 nm으로 변경</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>coffee_renamed  <span class="ot">&lt;-</span>  <span class="fu">rename</span>(coffee_data, <span class="at">nm =</span> name_long)</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="co"># by 사용하여 결합 변수를 지정하여 다른이름변수를 기준으로 조인하기</span></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>world_coffee2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(world, coffee_renamed, <span class="at">by =</span> <span class="fu">c</span>(<span class="at">name_long =</span> <span class="st">"nm"</span>))</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>world_coffee2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 177 features and 12 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 177 × 13
   iso_a2 name_l…¹ conti…² regio…³ subre…⁴ type  area_…⁵     pop lifeExp gdpPe…⁶
   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 FJ     Fiji     Oceania Oceania Melane… Sove…  1.93e4  8.86e5    70.0   8222.
 2 TZ     Tanzania Africa  Africa  Easter… Sove…  9.33e5  5.22e7    64.2   2402.
 3 EH     Western… Africa  Africa  Northe… Inde…  9.63e4 NA         NA       NA 
 4 CA     Canada   North … Americ… Northe… Sove…  1.00e7  3.55e7    82.0  43079.
 5 US     United … North … Americ… Northe… Coun…  9.51e6  3.19e8    78.8  51922.
 6 KZ     Kazakhs… Asia    Asia    Centra… Sove…  2.73e6  1.73e7    71.6  23587.
 7 UZ     Uzbekis… Asia    Asia    Centra… Sove…  4.61e5  3.08e7    71.0   5371.
 8 PG     Papua N… Oceania Oceania Melane… Sove…  4.65e5  7.76e6    65.2   3709.
 9 ID     Indones… Asia    Asia    South-… Sove…  1.82e6  2.55e8    68.9  10003.
10 AR     Argenti… South … Americ… South … Sove…  2.78e6  4.30e7    76.3  18798.
# … with 167 more rows, 3 more variables: geom &lt;MULTIPOLYGON [°]&gt;,
#   coffee_production_2016 &lt;int&gt;, coffee_production_2017 &lt;int&gt;, and abbreviated
#   variable names ¹​name_long, ²​continent, ³​region_un, ⁴​subregion, ⁵​area_km2,
#   ⁶​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="do">### inner_join (left_join과 다른점 : 공통된 값이 있는 행만 살림)</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>world_coffee_inner <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(world, coffee_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(name_long)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>world_coffee_inner</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 45 features and 12 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -117.1278 ymin: -33.76838 xmax: 156.02 ymax: 35.49401
Geodetic CRS:  WGS 84
# A tibble: 45 × 13
   iso_a2 name_long conti…¹ regio…² subre…³ type  area_…⁴    pop lifeExp gdpPe…⁵
   &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 TZ     Tanzania  Africa  Africa  Easter… Sove…  9.33e5 5.22e7    64.2   2402.
 2 PG     Papua Ne… Oceania Oceania Melane… Sove…  4.65e5 7.76e6    65.2   3709.
 3 ID     Indonesia Asia    Asia    South-… Sove…  1.82e6 2.55e8    68.9  10003.
 4 KE     Kenya     Africa  Africa  Easter… Sove…  5.91e5 4.60e7    66.2   2753.
 5 DO     Dominica… North … Americ… Caribb… Sove…  4.82e4 1.04e7    73.5  12663.
 6 TL     Timor-Le… Asia    Asia    South-… Sove…  1.47e4 1.21e6    68.3   6263.
 7 MX     Mexico    North … Americ… Centra… Sove…  1.97e6 1.24e8    76.8  16623.
 8 BR     Brazil    South … Americ… South … Sove…  8.51e6 2.04e8    75.0  15374.
 9 BO     Bolivia   South … Americ… South … Sove…  1.09e6 1.06e7    68.4   6325.
10 PE     Peru      South … Americ… South … Sove…  1.31e6 3.10e7    74.5  11548.
# … with 35 more rows, 3 more variables: geom &lt;MULTIPOLYGON [°]&gt;,
#   coffee_production_2016 &lt;int&gt;, coffee_production_2017 &lt;int&gt;, and abbreviated
#   variable names ¹​continent, ²​region_un, ³​subregion, ⁴​area_km2, ⁵​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 비교</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(world_coffee_inner)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 45 13</code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(world_coffee)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 177  13</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(coffee_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 47</code></pre>
</div>
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="do">### setdiff(x,y) : x에서 y에는 없는 데이터 추출</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(coffee_data<span class="sc">$</span>name_long, world<span class="sc">$</span>name_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Congo, Dem. Rep. of" "Others"             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 문자열 추출 (Dem으로 시작, Congo로 끝나는 단어 추출)</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(world<span class="sc">$</span>name_long, <span class="st">'Dem*.+Congo'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Democratic Republic of the Congo"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="do">### grepl : 문자열에서 특정 문자열 지정</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="co"># 이름 동일하게 변경</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>coffee_data<span class="sc">$</span>name_long[<span class="fu">grepl</span>(<span class="st">"Congo,"</span>, coffee_data<span class="sc">$</span>name_long)]  <span class="ot">&lt;-</span>  </span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(world<span class="sc">$</span>name_long, <span class="st">"Dem*.+Congo"</span>)</span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str_subset</span>(coffee_data<span class="sc">$</span>name_long, <span class="st">'Dem*.+Congo'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Democratic Republic of the Congo"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 46개의 국가 모두 반환</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>world_coffee_match <span class="ot">&lt;-</span> <span class="fu">inner_join</span>(world, coffee_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(name_long)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(world_coffee_match)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 46 13</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="do">### left_join(x,y) : x기준으로 y 병합</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>coffee_world <span class="ot">=</span> <span class="fu">left_join</span>(world, coffee_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(name_long)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(coffee_world)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 177  13</code></pre>
</div>
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>coffee_world2 <span class="ot">=</span> <span class="fu">left_join</span>(coffee_data, world)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(name_long)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(coffee_world2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 47 13</code></pre>
</div>
</div>
</section>
<section id="지리-벡터-데이터의-새로운-속성-만들기지리정보-제거하기" class="level2" data-number="10">
<h2 data-number="10" class="anchored" data-anchor-id="지리-벡터-데이터의-새로운-속성-만들기지리정보-제거하기"><span class="header-section-number">10</span> 지리 벡터 데이터의 새로운 속성 만들기/지리정보 제거하기</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 원본 데이터 덮어쓰기 방지</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>world_new <span class="ot">&lt;-</span> world</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="do">### 새로운 속성 pop_dens 생성 (Km2 면적당 인구밀도)</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>world_new<span class="sc">$</span>pop_dens <span class="ot">&lt;-</span> world_new<span class="sc">$</span>pop <span class="sc">/</span> world_new<span class="sc">$</span>area_km2</span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a><span class="do">### 속성값으로 보기 vs 지도상으로 보기(geom 정보가 있기때문)</span></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(world_new<span class="sc">$</span>pop_dens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="공간정보분석-CH3_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(world_new[<span class="st">'pop_dens'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="공간정보분석-CH3_files/figure-html/unnamed-chunk-14-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="do">### dplyr로 새로운 속성 만들기</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="co"># mutate</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a>world_new <span class="ot">&lt;-</span> world_new <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">pop_dens2 =</span> pop <span class="sc">/</span> area_km2)</span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a><span class="co"># transmute : 기존 열 모두 제거, 새로 만든 열 + geom 열만 반환</span></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>world_new <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">transmute</span>(<span class="at">pop_dens3 =</span> pop<span class="sc">/</span>area_km2)</span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a>world_new <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 6 features and 1 field
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -18.28799 xmax: 180 ymax: 83.23324
Geodetic CRS:  WGS 84
# A tibble: 6 × 2
  pop_dens3                                                                 geom
      &lt;dbl&gt;                                                   &lt;MULTIPOLYGON [°]&gt;
1     45.9  (((-180 -16.55522, -179.9174 -16.50178, -179.7933 -16.02088, -180 -…
2     56.0  (((33.90371 -0.95, 31.86617 -1.02736, 30.76986 -1.01455, 30.4191 -1…
3     NA    (((-8.66559 27.65643, -8.817828 27.65643, -8.794884 27.1207, -9.413…
4      3.54 (((-132.71 54.04001, -133.18 54.16998, -133.2397 53.85108, -133.054…
5     33.5  (((-171.7317 63.78252, -171.7911 63.40585, -171.5531 63.31779, -170…
6      6.33 (((87.35997 49.21498, 86.82936 49.82667, 85.54127 49.69286, 85.1155…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="do">### tidyr로 기존 속성 합치거나 분리하기</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="do">### unite()</span></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="co"># con_reg : continent + region_un 합치고 ':' 로 분리, 합쳐진 열들 remove</span></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>world_unite <span class="ot">&lt;-</span>  world <span class="sc">%&gt;%</span></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"con_reg"</span>, continent<span class="sc">:</span>region_un, <span class="at">sep =</span> <span class="st">":"</span>, <span class="at">remove =</span> <span class="cn">TRUE</span>)</span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a>world_unite</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 177 features and 9 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 177 × 10
   iso_a2 name_long        con_reg subre…¹ type  area_…²     pop lifeExp gdpPe…³
   &lt;chr&gt;  &lt;chr&gt;            &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 FJ     Fiji             Oceani… Melane… Sove…  1.93e4  8.86e5    70.0   8222.
 2 TZ     Tanzania         Africa… Easter… Sove…  9.33e5  5.22e7    64.2   2402.
 3 EH     Western Sahara   Africa… Northe… Inde…  9.63e4 NA         NA       NA 
 4 CA     Canada           North … Northe… Sove…  1.00e7  3.55e7    82.0  43079.
 5 US     United States    North … Northe… Coun…  9.51e6  3.19e8    78.8  51922.
 6 KZ     Kazakhstan       Asia:A… Centra… Sove…  2.73e6  1.73e7    71.6  23587.
 7 UZ     Uzbekistan       Asia:A… Centra… Sove…  4.61e5  3.08e7    71.0   5371.
 8 PG     Papua New Guinea Oceani… Melane… Sove…  4.65e5  7.76e6    65.2   3709.
 9 ID     Indonesia        Asia:A… South-… Sove…  1.82e6  2.55e8    68.9  10003.
10 AR     Argentina        South … South … Sove…  2.78e6  4.30e7    76.3  18798.
# … with 167 more rows, 1 more variable: geom &lt;MULTIPOLYGON [°]&gt;, and
#   abbreviated variable names ¹​subregion, ²​area_km2, ³​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 합쳐진 열들 제거X</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>world_unite2 <span class="ot">&lt;-</span>  world <span class="sc">%&gt;%</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(<span class="st">"con_reg"</span>, continent<span class="sc">:</span>region_un, <span class="at">sep =</span> <span class="st">":"</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>world_unite2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 177 features and 11 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 177 × 12
   iso_a2 name_l…¹ con_reg conti…² regio…³ subre…⁴ type  area_…⁵     pop lifeExp
   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 FJ     Fiji     Oceani… Oceania Oceania Melane… Sove…  1.93e4  8.86e5    70.0
 2 TZ     Tanzania Africa… Africa  Africa  Easter… Sove…  9.33e5  5.22e7    64.2
 3 EH     Western… Africa… Africa  Africa  Northe… Inde…  9.63e4 NA         NA  
 4 CA     Canada   North … North … Americ… Northe… Sove…  1.00e7  3.55e7    82.0
 5 US     United … North … North … Americ… Northe… Coun…  9.51e6  3.19e8    78.8
 6 KZ     Kazakhs… Asia:A… Asia    Asia    Centra… Sove…  2.73e6  1.73e7    71.6
 7 UZ     Uzbekis… Asia:A… Asia    Asia    Centra… Sove…  4.61e5  3.08e7    71.0
 8 PG     Papua N… Oceani… Oceania Oceania Melane… Sove…  4.65e5  7.76e6    65.2
 9 ID     Indones… Asia:A… Asia    Asia    South-… Sove…  1.82e6  2.55e8    68.9
10 AR     Argenti… South … South … Americ… South … Sove…  2.78e6  4.30e7    76.3
# … with 167 more rows, 2 more variables: gdpPercap &lt;dbl&gt;,
#   geom &lt;MULTIPOLYGON [°]&gt;, and abbreviated variable names ¹​name_long,
#   ²​continent, ³​region_un, ⁴​subregion, ⁵​area_km2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="do">### separate()</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="co"># con_reg를 continent, region_un로 분리</span></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>world_separate <span class="ot">&lt;-</span>  world_unite <span class="sc">%&gt;%</span> </span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(con_reg, <span class="fu">c</span>(<span class="st">"continent"</span>, <span class="st">"region_un"</span>), <span class="at">sep =</span> <span class="st">':'</span>)</span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a>world_separate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 177 features and 10 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 177 × 11
   iso_a2 name_l…¹ conti…² regio…³ subre…⁴ type  area_…⁵     pop lifeExp gdpPe…⁶
   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 FJ     Fiji     Oceania Oceania Melane… Sove…  1.93e4  8.86e5    70.0   8222.
 2 TZ     Tanzania Africa  Africa  Easter… Sove…  9.33e5  5.22e7    64.2   2402.
 3 EH     Western… Africa  Africa  Northe… Inde…  9.63e4 NA         NA       NA 
 4 CA     Canada   North … Americ… Northe… Sove…  1.00e7  3.55e7    82.0  43079.
 5 US     United … North … Americ… Northe… Coun…  9.51e6  3.19e8    78.8  51922.
 6 KZ     Kazakhs… Asia    Asia    Centra… Sove…  2.73e6  1.73e7    71.6  23587.
 7 UZ     Uzbekis… Asia    Asia    Centra… Sove…  4.61e5  3.08e7    71.0   5371.
 8 PG     Papua N… Oceania Oceania Melane… Sove…  4.65e5  7.76e6    65.2   3709.
 9 ID     Indones… Asia    Asia    South-… Sove…  1.82e6  2.55e8    68.9  10003.
10 AR     Argenti… South … Americ… South … Sove…  2.78e6  4.30e7    76.3  18798.
# … with 167 more rows, 1 more variable: geom &lt;MULTIPOLYGON [°]&gt;, and
#   abbreviated variable names ¹​name_long, ²​continent, ³​region_un, ⁴​subregion,
#   ⁵​area_km2, ⁶​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 데이터 속성 이름 바꾸기</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="co"># rename(x:new = y:old)</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>world <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">name =</span> name_long)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 177 features and 10 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 177 × 11
   iso_a2 name     conti…¹ regio…² subre…³ type  area_…⁴     pop lifeExp gdpPe…⁵
   &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 FJ     Fiji     Oceania Oceania Melane… Sove…  1.93e4  8.86e5    70.0   8222.
 2 TZ     Tanzania Africa  Africa  Easter… Sove…  9.33e5  5.22e7    64.2   2402.
 3 EH     Western… Africa  Africa  Northe… Inde…  9.63e4 NA         NA       NA 
 4 CA     Canada   North … Americ… Northe… Sove…  1.00e7  3.55e7    82.0  43079.
 5 US     United … North … Americ… Northe… Coun…  9.51e6  3.19e8    78.8  51922.
 6 KZ     Kazakhs… Asia    Asia    Centra… Sove…  2.73e6  1.73e7    71.6  23587.
 7 UZ     Uzbekis… Asia    Asia    Centra… Sove…  4.61e5  3.08e7    71.0   5371.
 8 PG     Papua N… Oceania Oceania Melane… Sove…  4.65e5  7.76e6    65.2   3709.
 9 ID     Indones… Asia    Asia    South-… Sove…  1.82e6  2.55e8    68.9  10003.
10 AR     Argenti… South … Americ… South … Sove…  2.78e6  4.30e7    76.3  18798.
# … with 167 more rows, 1 more variable: geom &lt;MULTIPOLYGON [°]&gt;, and
#   abbreviated variable names ¹​continent, ²​region_un, ³​subregion, ⁴​area_km2,
#   ⁵​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>world</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 177 features and 10 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 177 × 11
   iso_a2 name_l…¹ conti…² regio…³ subre…⁴ type  area_…⁵     pop lifeExp gdpPe…⁶
 * &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
 1 FJ     Fiji     Oceania Oceania Melane… Sove…  1.93e4  8.86e5    70.0   8222.
 2 TZ     Tanzania Africa  Africa  Easter… Sove…  9.33e5  5.22e7    64.2   2402.
 3 EH     Western… Africa  Africa  Northe… Inde…  9.63e4 NA         NA       NA 
 4 CA     Canada   North … Americ… Northe… Sove…  1.00e7  3.55e7    82.0  43079.
 5 US     United … North … Americ… Northe… Coun…  9.51e6  3.19e8    78.8  51922.
 6 KZ     Kazakhs… Asia    Asia    Centra… Sove…  2.73e6  1.73e7    71.6  23587.
 7 UZ     Uzbekis… Asia    Asia    Centra… Sove…  4.61e5  3.08e7    71.0   5371.
 8 PG     Papua N… Oceania Oceania Melane… Sove…  4.65e5  7.76e6    65.2   3709.
 9 ID     Indones… Asia    Asia    South-… Sove…  1.82e6  2.55e8    68.9  10003.
10 AR     Argenti… South … Americ… South … Sove…  2.78e6  4.30e7    76.3  18798.
# … with 167 more rows, 1 more variable: geom &lt;MULTIPOLYGON [°]&gt;, and
#   abbreviated variable names ¹​name_long, ²​continent, ³​region_un, ⁴​subregion,
#   ⁵​area_km2, ⁶​gdpPercap</code></pre>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 여러개의 이름 변경</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>new_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"i"</span>, <span class="st">"n"</span>, <span class="st">"c"</span>, <span class="st">"r"</span>, <span class="st">"s"</span>, <span class="st">"t"</span>, <span class="st">"a"</span>, <span class="st">"p"</span>, <span class="st">"l"</span>, <span class="st">"gP"</span>, <span class="st">"geom"</span>)</span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>world <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(new_names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Simple feature collection with 177 features and 10 fields
Geometry type: MULTIPOLYGON
Dimension:     XY
Bounding box:  xmin: -180 ymin: -89.9 xmax: 180 ymax: 83.64513
Geodetic CRS:  WGS 84
# A tibble: 177 × 11
   i     n                c        r     s     t          a       p     l     gP
 * &lt;chr&gt; &lt;chr&gt;            &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
 1 FJ    Fiji             Oceania  Ocea… Mela… Sove… 1.93e4  8.86e5  70.0  8222.
 2 TZ    Tanzania         Africa   Afri… East… Sove… 9.33e5  5.22e7  64.2  2402.
 3 EH    Western Sahara   Africa   Afri… Nort… Inde… 9.63e4 NA       NA      NA 
 4 CA    Canada           North A… Amer… Nort… Sove… 1.00e7  3.55e7  82.0 43079.
 5 US    United States    North A… Amer… Nort… Coun… 9.51e6  3.19e8  78.8 51922.
 6 KZ    Kazakhstan       Asia     Asia  Cent… Sove… 2.73e6  1.73e7  71.6 23587.
 7 UZ    Uzbekistan       Asia     Asia  Cent… Sove… 4.61e5  3.08e7  71.0  5371.
 8 PG    Papua New Guinea Oceania  Ocea… Mela… Sove… 4.65e5  7.76e6  65.2  3709.
 9 ID    Indonesia        Asia     Asia  Sout… Sove… 1.82e6  2.55e8  68.9 10003.
10 AR    Argentina        South A… Amer… Sout… Sove… 2.78e6  4.30e7  76.3 18798.
# … with 167 more rows, and 1 more variable: geom &lt;MULTIPOLYGON [°]&gt;</code></pre>
</div>
</div>
</section>
<section id="래스터-객체-조작" class="level2" data-number="11">
<h2 data-number="11" class="anchored" data-anchor-id="래스터-객체-조작"><span class="header-section-number">11</span> 래스터 객체 조작</h2>
<ul>
<li>numeric, integer, logical, factor 데이처 유형 지원 (character지원X)</li>
<li>문자형으로 래스터 객체 만들기 : 요인형 or 논리형으로 변환 필요</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="do">### raster 패키지를 이용한 integer 속성의 래스터객체</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>elev <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="at">nrows =</span> <span class="dv">6</span>,  </span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">ncols =</span> <span class="dv">6</span>,  </span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">xmn =</span> <span class="sc">-</span><span class="fl">1.5</span>, </span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">xmx =</span> <span class="fl">1.5</span>, </span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">ymn =</span> <span class="sc">-</span><span class="fl">1.5</span>,  </span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">ymx =</span> <span class="fl">1.5</span>, </span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">vals =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">36</span>) </span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-10"><a href="#cb147-10" aria-hidden="true" tabindex="-1"></a>elev</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>class      : RasterLayer 
dimensions : 6, 6, 36  (nrow, ncol, ncell)
resolution : 0.5, 0.5  (x, y)
extent     : -1.5, 1.5, -1.5, 1.5  (xmin, xmax, ymin, ymax)
crs        : +proj=longlat +datum=WGS84 +no_defs 
source     : memory
names      : layer 
values     : 1, 36  (min, max)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(elev, <span class="at">main =</span> <span class="st">'raster datasets with numeric valeus'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="공간정보분석-CH3_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="do">### 모래 굵기 수준 래스터객체 만들기</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>grain_order <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"clay"</span>, <span class="st">"silt"</span>, <span class="st">"sand"</span>)                      <span class="co"># 모래 이름</span></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>grain_char <span class="ot">&lt;-</span> <span class="fu">sample</span>(grain_order, <span class="dv">36</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)         <span class="co"># 개수지정(중복허용)</span></span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>grain_fact <span class="ot">&lt;-</span> <span class="fu">factor</span>(grain_char, <span class="at">levels =</span> grain_order)        <span class="co"># 팩터 변환</span></span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a>grain <span class="ot">&lt;-</span> <span class="fu">raster</span>(<span class="at">nrows =</span> <span class="dv">6</span>, <span class="at">ncols =</span> <span class="dv">6</span>, <span class="at">res =</span> <span class="fl">0.5</span>, </span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">xmn =</span> <span class="sc">-</span><span class="fl">1.5</span>, <span class="at">xmx =</span> <span class="fl">1.5</span>, <span class="at">ymn =</span> <span class="sc">-</span><span class="fl">1.5</span>, <span class="at">ymx =</span> <span class="fl">1.5</span>,</span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">vals =</span> grain_fact)</span>
<span id="cb150-8"><a href="#cb150-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-9"><a href="#cb150-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(grain)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="공간정보분석-CH3_files/figure-html/unnamed-chunk-15-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="do">###새로운 facter levels 추가</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(grain)[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">levels</span>(grain)[[<span class="dv">1</span>]], <span class="at">wetness =</span> <span class="fu">c</span>(<span class="st">"wet"</span>, <span class="st">"moist"</span>, <span class="st">"dry"</span>))</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(grain)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
  ID VALUE wetness
1  1  clay     wet
2  2  silt   moist
3  3  sand     dry</code></pre>
</div>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>grain[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">11</span>, <span class="dv">35</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 1 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">factorValues</span>(grain, grain[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">11</span>, <span class="dv">35</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  VALUE wetness
1  clay     wet
2  clay     wet
3  clay     wet</code></pre>
</div>
</div>
</section>
<section id="래스터-부분-설정" class="level2" data-number="12">
<h2 data-number="12" class="anchored" data-anchor-id="래스터-부분-설정"><span class="header-section-number">12</span> 래스터 부분 설정</h2>
<ul>
<li>R에서 래스터 부분 설정 4가지
<ul>
<li>행,열 인덱싱</li>
<li>셀 ID</li>
<li>좌표</li>
<li>다른 공간 객체</li>
</ul></li>
<li>래스터 객체 elev의 왼쪽상단( the top left pixel) 의 값을 출력</li>
<li>모든 값을 추출하거나 전체 행을 추출하려면 values, getValues를 사용</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="do">### row 1, column 1</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>elev[<span class="dv">1</span>, <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="do">### cell ID 1</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>elev[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, Seongtaek</div>   
  </div>
</footer>



</body></html>